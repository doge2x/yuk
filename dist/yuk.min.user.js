// ==UserScript==
// @name         yuk-client
// @version      0.3.2
// @author       doge2x
// @namespace    https://github.com/doge2x/yuk
// @match        https://examination.xuetangx.com/*
// @grant        GM.xmlHttpRequest
// @grant        GM_getValue
// @grant        GM_setValue
// @run-at       document-start
// ==/UserScript==

(()=>{"use strict";var r=[,(r,e,n)=>{n.r(e),n.d(e,{Client:()=>c});var t=n(2),i=n(8),o=n(9),a=n(14),u=function(r,e,n,t){return new(n||(n=Promise))((function(i,o){function a(r){try{c(t.next(r))}catch(r){o(r)}}function u(r){try{c(t.throw(r))}catch(r){o(r)}}function c(r){var e;r.done?i(r.value):(e=r.value,e instanceof n?e:new n((function(r){r(e)}))).then(a,u)}c((t=t.apply(r,e||[])).next())}))};class c{constructor(){this.onmsg=[],this.queue=new Map;const r=new t.JSONRPCClient((e=>u(this,void 0,void 0,(function*(){const n=a.SERVER.value;null!==n&&(yield new Promise(((t,o)=>u(this,void 0,void 0,(function*(){yield i.default.xhr({url:n,method:"POST",headers:{"Content-Type":"application/json"},data:JSON.stringify(e),onload:e=>{200===e.status?(r.receive(JSON.parse(e.responseText)),t()):o(new Error(e.statusText))},onerror:r=>o(r.statusText)})})))))}))));this.client=r}watch(r){return u(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{const t=setInterval((()=>{this.sendQueue().catch((r=>{clearInterval(t),alert("与服务器通信异常"),n(r)}))}),r)}))}))}sendQueue(){return u(this,void 0,void 0,(function*(){if(this.queue.size<1||null===a.USERNAME.value||null===a.SERVER.value||null===a.EXAM_ID.value||!1===a.SYNC_ANSWERS.value)return;let r=[...this.queue.values()];if(this.queue.clear(),null===a.TOKEN.value){(0,o.devLog)(`login to server: ${a.USERNAME.value}, ${a.EXAM_ID.value}`);const r=yield this.client.request("login",[a.USERNAME.value,a.EXAM_ID.value]);(0,o.devLog)("got token",r),a.TOKEN.value=r}this.postAnswers(a.TOKEN.value,r)}))}postAnswers(r,e){return u(this,void 0,void 0,(function*(){(0,o.devLog)("send answers",e);const n=yield this.client.request("answer_problem",[r,e]);(0,o.devLog)("receive answers",n),this.onmsg.forEach((r=>r(n)))}))}answerProblem(r){return u(this,void 0,void 0,(function*(){r.forEach((r=>{this.queue.set(r.problem_id,r)}))}))}onmessage(r){this.onmsg.push(r)}}},function(r,e,n){var t=this&&this.__createBinding||(Object.create?function(r,e,n,t){void 0===t&&(t=n),Object.defineProperty(r,t,{enumerable:!0,get:function(){return e[n]}})}:function(r,e,n,t){void 0===t&&(t=n),r[t]=e[n]}),i=this&&this.__exportStar||function(r,e){for(var n in r)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||t(e,r,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(3),e),i(n(4),e),i(n(6),e),i(n(7),e)},function(r,e,n){var t=this&&this.__awaiter||function(r,e,n,t){return new(n||(n=Promise))((function(i,o){function a(r){try{c(t.next(r))}catch(r){o(r)}}function u(r){try{c(t.throw(r))}catch(r){o(r)}}function c(r){var e;r.done?i(r.value):(e=r.value,e instanceof n?e:new n((function(r){r(e)}))).then(a,u)}c((t=t.apply(r,e||[])).next())}))},i=this&&this.__generator||function(r,e){var n,t,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,t&&(i=2&o[0]?t.return:o[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,o[1])).done)return i;switch(t=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,t=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(r,a)}catch(r){o=[6,r],t=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.JSONRPCClient=void 0;var o=n(4),a=n(5),u=function(){function r(r,e){this._send=r,this.createID=e,this.idToResolveMap=new Map,this.id=0}return r.prototype._createID=function(){return this.createID?this.createID():++this.id},r.prototype.timeout=function(r,e){var n=this;void 0===e&&(e=function(r){return(0,o.createJSONRPCErrorResponse)(r,a.DefaultErrorCode,"Request timeout")});var t=function(t,i){var o=setTimeout((function(){t.forEach((function(r){var t=n.idToResolveMap.get(r);t&&(n.idToResolveMap.delete(r),t(e(r)))}))}),r);return i().then((function(r){return clearTimeout(o),r}),(function(r){return clearTimeout(o),Promise.reject(r)}))};return{request:function(r,e,i){var o=n._createID();return t([o],(function(){return n.requestWithID(r,e,i,o)}))},requestAdvanced:function(r,e){return function(r,e){var i=(Array.isArray(r)?r:[r]).map((function(r){return r.id})).filter(c);return t(i,(function(){return n.requestAdvanced(r,e)}))}(r,e)}}},r.prototype.request=function(r,e,n){return this.requestWithID(r,e,n,this._createID())},r.prototype.requestWithID=function(r,e,n,a){return t(this,void 0,void 0,(function(){var t,u;return i(this,(function(i){switch(i.label){case 0:return t={jsonrpc:o.JSONRPC,method:r,params:e,id:a},[4,this.requestAdvanced(t,n)];case 1:return void 0===(u=i.sent()).result||u.error?void 0===u.result&&u.error?[2,Promise.reject(new Error(u.error.message))]:[2,Promise.reject(new Error("An unexpected error occurred"))]:[2,u.result]}}))}))},r.prototype.requestAdvanced=function(r,e){var n=this,t=Array.isArray(r);Array.isArray(r)||(r=[r]);var i=r.filter((function(r){return c(r.id)})),u=i.map((function(r){return new Promise((function(e){return n.idToResolveMap.set(r.id,e)}))})),l=Promise.all(u).then((function(r){return t||!r.length?r:r[0]}));return this.send(t?r:r[0],e).then((function(){return l}),(function(r){return i.forEach((function(e){n.receive((0,o.createJSONRPCErrorResponse)(e.id,a.DefaultErrorCode,r&&r.message||"Failed to send a request"))})),l}))},r.prototype.notify=function(r,e,n){this.send({jsonrpc:o.JSONRPC,method:r,params:e},n).then(void 0,(function(){}))},r.prototype.send=function(r,e){return this._send(r,e)},r.prototype.rejectAllPendingRequests=function(r){this.idToResolveMap.forEach((function(e,n){return e((0,o.createJSONRPCErrorResponse)(n,a.DefaultErrorCode,r))})),this.idToResolveMap.clear()},r.prototype.receive=function(r){var e=this;Array.isArray(r)||(r=[r]),r.forEach((function(r){var n=e.idToResolveMap.get(r.id);n&&(e.idToResolveMap.delete(r.id),n(r))}))},r}();e.JSONRPCClient=u;var c=function(r){return null!=r}},(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createJSONRPCErrorResponse=e.JSONRPCErrorCode=e.isJSONRPCResponses=e.isJSONRPCResponse=e.isJSONRPCRequests=e.isJSONRPCRequest=e.isJSONRPCID=e.JSONRPC=void 0,e.JSONRPC="2.0";e.isJSONRPCID=function(r){return"string"==typeof r||"number"==typeof r||null===r};e.isJSONRPCRequest=function(r){return r.jsonrpc===e.JSONRPC&&void 0!==r.method&&void 0===r.result&&void 0===r.error};e.isJSONRPCRequests=function(r){return Array.isArray(r)&&r.every(e.isJSONRPCRequest)};e.isJSONRPCResponse=function(r){return r.jsonrpc===e.JSONRPC&&void 0!==r.id&&(void 0!==r.result||void 0!==r.error)};e.isJSONRPCResponses=function(r){return Array.isArray(r)&&r.every(e.isJSONRPCResponse)},function(r){r[r.ParseError=-32700]="ParseError",r[r.InvalidRequest=-32600]="InvalidRequest",r[r.MethodNotFound=-32601]="MethodNotFound",r[r.InvalidParams=-32602]="InvalidParams",r[r.InternalError=-32603]="InternalError"}(e.JSONRPCErrorCode||(e.JSONRPCErrorCode={}));e.createJSONRPCErrorResponse=function(r,n,t,i){var o={code:n,message:t};return i&&(o.data=i),{jsonrpc:e.JSONRPC,id:r,error:o}}},(r,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultErrorCode=void 0,e.DefaultErrorCode=0},function(r,e,n){var t=this&&this.__assign||function(){return t=Object.assign||function(r){for(var e,n=1,t=arguments.length;n<t;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r},t.apply(this,arguments)},i=this&&this.__awaiter||function(r,e,n,t){return new(n||(n=Promise))((function(i,o){function a(r){try{c(t.next(r))}catch(r){o(r)}}function u(r){try{c(t.throw(r))}catch(r){o(r)}}function c(r){var e;r.done?i(r.value):(e=r.value,e instanceof n?e:new n((function(r){r(e)}))).then(a,u)}c((t=t.apply(r,e||[])).next())}))},o=this&&this.__generator||function(r,e){var n,t,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,t&&(i=2&o[0]?t.return:o[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,o[1])).done)return i;switch(t=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,t=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(r,a)}catch(r){o=[6,r],t=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},a=this&&this.__spreadArray||function(r,e,n){if(n||2===arguments.length)for(var t,i=0,o=e.length;i<o;i++)!t&&i in e||(t||(t=Array.prototype.slice.call(e,0,i)),t[i]=e[i]);return r.concat(t||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.JSONRPCServer=void 0;var u=n(4),c=n(5),l=function(r){return(0,u.createJSONRPCErrorResponse)((0,u.isJSONRPCID)(r.id)?r.id:null,u.JSONRPCErrorCode.InvalidRequest,"Invalid Request")},f=function(){function r(r){var e;void 0===r&&(r={}),this.mapErrorToJSONRPCErrorResponse=_,this.nameToMethodDictionary={},this.middleware=null,this.errorListener=null!==(e=r.errorListener)&&void 0!==e?e:console.warn}return r.prototype.addMethod=function(r,e){this.addMethodAdvanced(r,this.toJSONRPCMethod(e))},r.prototype.toJSONRPCMethod=function(r){return function(e,n){var t=r(e.params,n);return Promise.resolve(t).then((function(r){return v(e.id,r)}))}},r.prototype.addMethodAdvanced=function(r,e){var n;this.nameToMethodDictionary=t(t({},this.nameToMethodDictionary),((n={})[r]=e,n))},r.prototype.receiveJSON=function(r,e){var n=this.tryParseRequestJSON(r);return n?this.receive(n,e):Promise.resolve((0,u.createJSONRPCErrorResponse)(null,u.JSONRPCErrorCode.ParseError,"Parse error"))},r.prototype.tryParseRequestJSON=function(r){try{return JSON.parse(r)}catch(r){return null}},r.prototype.receive=function(r,e){return Array.isArray(r)?this.receiveMultiple(r,e):this.receiveSingle(r,e)},r.prototype.receiveMultiple=function(r,e){return i(this,void 0,void 0,(function(){var n,t=this;return o(this,(function(i){switch(i.label){case 0:return[4,Promise.all(r.map((function(r){return t.receiveSingle(r,e)})))];case 1:return 1===(n=i.sent().filter(s)).length?[2,n[0]]:n.length?[2,n]:[2,null]}}))}))},r.prototype.receiveSingle=function(r,e){return i(this,void 0,void 0,(function(){var n,t;return o(this,(function(i){switch(i.label){case 0:return n=this.nameToMethodDictionary[r.method],(0,u.isJSONRPCRequest)(r)?[3,1]:[2,l(r)];case 1:return n?[4,this.callMethod(n,r,e)]:[3,3];case 2:return t=i.sent(),[2,m(r,t)];case 3:return void 0!==r.id?[2,(o=r.id,(0,u.createJSONRPCErrorResponse)(o,u.JSONRPCErrorCode.MethodNotFound,"Method not found"))]:[2,null];case 4:return[2]}var o}))}))},r.prototype.applyMiddleware=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];this.middleware?this.middleware=this.combineMiddlewares(a([this.middleware],r,!0)):this.middleware=this.combineMiddlewares(r)},r.prototype.combineMiddlewares=function(r){return r.length?r.reduce(this.middlewareReducer):null},r.prototype.middlewareReducer=function(r,e){return function(n,t,i){return r((function(r,t){return e(n,r,t)}),t,i)}},r.prototype.callMethod=function(r,e,n){var t=this,i=function(r){return t.errorListener('An unexpected error occurred while executing "'.concat(e.method,'" JSON-RPC method:'),r),Promise.resolve(t.mapErrorToJSONRPCErrorResponseIfNecessary(e.id,r))};try{return(this.middleware||d)((function(e,n){return r(e,n)}),e,n).then(void 0,i)}catch(r){return i(r)}},r.prototype.mapErrorToJSONRPCErrorResponseIfNecessary=function(r,e){return void 0!==r?this.mapErrorToJSONRPCErrorResponse(r,e):null},r}();e.JSONRPCServer=f;var s=function(r){return null!==r},d=function(r,e,n){return r(e,n)},v=function(r,e){return void 0!==r?{jsonrpc:u.JSONRPC,id:r,result:void 0===e?null:e}:null},_=function(r,e){return(0,u.createJSONRPCErrorResponse)(r,c.DefaultErrorCode,e&&e.message||"An unexpected error occurred")},m=function(r,e){return e||(void 0!==r.id?(0,u.createJSONRPCErrorResponse)(r.id,u.JSONRPCErrorCode.InternalError,"Internal error"):null)}},function(r,e,n){var t=this&&this.__awaiter||function(r,e,n,t){return new(n||(n=Promise))((function(i,o){function a(r){try{c(t.next(r))}catch(r){o(r)}}function u(r){try{c(t.throw(r))}catch(r){o(r)}}function c(r){var e;r.done?i(r.value):(e=r.value,e instanceof n?e:new n((function(r){r(e)}))).then(a,u)}c((t=t.apply(r,e||[])).next())}))},i=this&&this.__generator||function(r,e){var n,t,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,t&&(i=2&o[0]?t.return:o[0]?t.throw||((i=t.return)&&i.call(t),0):t.next)&&!(i=i.call(t,o[1])).done)return i;switch(t=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,t=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(r,a)}catch(r){o=[6,r],t=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.JSONRPCServerAndClient=void 0;var o=n(4),a=function(){function r(r,e,n){var t;void 0===n&&(n={}),this.server=r,this.client=e,this.errorListener=null!==(t=n.errorListener)&&void 0!==t?t:console.warn}return r.prototype.applyServerMiddleware=function(){for(var r,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(r=this.server).applyMiddleware.apply(r,e)},r.prototype.addMethod=function(r,e){this.server.addMethod(r,e)},r.prototype.addMethodAdvanced=function(r,e){this.server.addMethodAdvanced(r,e)},r.prototype.timeout=function(r){return this.client.timeout(r)},r.prototype.request=function(r,e,n){return this.client.request(r,e,n)},r.prototype.requestAdvanced=function(r,e){return this.client.requestAdvanced(r,e)},r.prototype.notify=function(r,e,n){this.client.notify(r,e,n)},r.prototype.rejectAllPendingRequests=function(r){this.client.rejectAllPendingRequests(r)},r.prototype.receiveAndSend=function(r,e,n){return t(this,void 0,void 0,(function(){var t,a;return i(this,(function(i){switch(i.label){case 0:return(0,o.isJSONRPCResponse)(r)||(0,o.isJSONRPCResponses)(r)?(this.client.receive(r),[3,4]):[3,1];case 1:return(0,o.isJSONRPCRequest)(r)||(0,o.isJSONRPCRequests)(r)?[4,this.server.receive(r,e)]:[3,3];case 2:return(t=i.sent())?[2,this.client.send(t,n)]:[3,4];case 3:return a="Received an invalid JSON-RPC message",this.errorListener(a,r),[2,Promise.reject(new Error(a))];case 4:return[2]}}))}))},r}();e.JSONRPCServerAndClient=a},(r,e,n)=>{n.r(e),n.d(e,{default:()=>t});const t={getValue:r=>GM_getValue(r),setValue:(r,e)=>GM_setValue(r,e),xhr:async r=>await GM.xmlHttpRequest(r)}},(r,e,n)=>{n.r(e),n.d(e,{Map2:()=>a,devLog:()=>o,newURL:()=>l,openWin:()=>c,percent:()=>u});var t=n(10),i=n(13);function o(r,...e){0}class a extends Map{constructor(r){super(),this.def=r}setWith(r,e){var n;super.set(r,e(null!==(n=super.get(r))&&void 0!==n?n:this.def()))}}function u(r){return`${Math.floor(100*r)}%`}function c(r,e){e=null!=e?e:{};const n=window.open(void 0,void 0,Object.entries({location:"no",height:e.height,width:e.width,left:e.left,top:e.top,resizable:"yes",menubar:"no",scrollbars:"yes",status:"no",titlebar:"no",toolbar:"no"}).map((([r,e])=>`${r}=${e}`)).join(","));return window.addEventListener("unload",(()=>n.close())),n.document.head.append(i.default.createElement(i.default.Fragment,null,i.default.createElement("title",null,r),i.default.createElement("style",null,t.default.toString()))),n}function l(r,e){const n=new URL(r,self.location.origin);for(const[r,t]of Object.entries(null!=e?e:{}))n.searchParams.set(r,t);return n}},(r,e,n)=>{n.r(e),n.d(e,{about:()=>m,answerDetail:()=>l,answerDetailShortAnswer:()=>f,clickable:()=>c,default:()=>y,mainBody:()=>u,settings:()=>s,settingsEntry:()=>d,settingsSubmit:()=>v,settingsSubmitTip:()=>_,uploadImg:()=>h,uploadImgConfirm:()=>g,uploadImgImage:()=>p});var t=n(11),i=n.n(t),o=n(12),a=n.n(o)()(i());a.push([r.id,".KtSQfh45DkzY1g4GTjHG {\n  font-size: 0.75rem;\n  opacity: 0.5;\n}\n.nl0fbl1STsJ1E_ijRd86 {\n  cursor: pointer;\n}\n.E2WC5WHEPccqZwiUT6nE p {\n  margin: 0;\n}\n.E2WC5WHEPccqZwiUT6nE ul {\n  margin: 0;\n  padding-left: 1.5rem;\n}\n.E2WC5WHEPccqZwiUT6nE img {\n  height: auto;\n  width: 80%;\n}\n.yZjHuTE6p_FgmbomqPFx {\n  border-style: groove;\n  border-width: thin;\n  margin: 0.2rem;\n  padding: 0.2rem;\n}\n._o1gebpEn7x9Td7Hes6g {\n  display: flex;\n  flex-direction: column;\n}\n.YalNJJWiNdYPl5FzO1a_ {\n  display: flex;\n  flex-direction: row;\n  margin-bottom: 0.5rem;\n  justify-content: space-between;\n  align-items: center;\n}\n.YalNJJWiNdYPl5FzO1a_ label {\n  font-weight: bold;\n}\n.YalNJJWiNdYPl5FzO1a_ input {\n  height: fit-content;\n  text-align: right;\n}\n.GkQ9CK5Dl58odGzSBLOP {\n  display: flex;\n  flex-direction: column;\n  justify-content: end;\n  align-items: end;\n}\n.CY2oPnMnonyamRy15TxZ {\n  margin-bottom: 0.5rem;\n}\n.GkQ9CK5Dl58odGzSBLOP button {\n  cursor: pointer;\n}\n.ssrv8ndZGNgvTL1Osr92 p {\n  margin-bottom: 0.25rem;\n}\n.ssrv8ndZGNgvTL1Osr92 ul {\n  padding-left: 1.5rem;\n  margin: 0 0 0.25rem 0;\n}\n.ssrv8ndZGNgvTL1Osr92 ul li {\n  margin-bottom: 0.25rem;\n}\n.UJVcq5yyVfeOtVL0dWlT {\n  display: flex;\n  flex-direction: column;\n}\n.UJVcq5yyVfeOtVL0dWlT img {\n  width: 100%;\n  height: auto;\n}\n.SB_KxqWR3Sju8ih5VCQj {\n  border-style: groove;\n  border-width: thin;\n  padding: 0.5rem;\n}\n.YM_eQySt5C11IITqy_br {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 0.5rem;\n}\n",""]);var u="KtSQfh45DkzY1g4GTjHG",c="nl0fbl1STsJ1E_ijRd86",l="E2WC5WHEPccqZwiUT6nE",f="yZjHuTE6p_FgmbomqPFx",s="_o1gebpEn7x9Td7Hes6g",d="YalNJJWiNdYPl5FzO1a_",v="GkQ9CK5Dl58odGzSBLOP",_="CY2oPnMnonyamRy15TxZ",m="ssrv8ndZGNgvTL1Osr92",h="UJVcq5yyVfeOtVL0dWlT",p="SB_KxqWR3Sju8ih5VCQj",g="YM_eQySt5C11IITqy_br";const y=a},r=>{r.exports=function(r){return r[1]}},r=>{r.exports=function(r){var e=[];return e.toString=function(){return this.map((function(e){var n="",t=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),t&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=r(e),t&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(r,n,t,i,o){"string"==typeof r&&(r=[[null,r,void 0]]);var a={};if(t)for(var u=0;u<this.length;u++){var c=this[u][0];null!=c&&(a[c]=!0)}for(var l=0;l<r.length;l++){var f=[].concat(r[l]);t&&a[f[0]]||(void 0!==o&&(void 0===f[5]||(f[1]="@layer".concat(f[5].length>0?" ".concat(f[5]):""," {").concat(f[1],"}")),f[5]=o),n&&(f[2]?(f[1]="@media ".concat(f[2]," {").concat(f[1],"}"),f[2]=n):f[2]=n),i&&(f[4]?(f[1]="@supports (".concat(f[4],") {").concat(f[1],"}"),f[4]=i):f[4]="".concat(i)),e.push(f))}},e}},(r,e,n)=>{function t(r){return Array.isArray(r)?(new Array).concat(...r.map(t)):r instanceof Node?[r]:null==r?[]:[document.createTextNode(String(r))]}function i(r,e){for(const n of e)r.appendChild(n)}function o(r,e){for(const[n,t]of Object.entries(e))n.startsWith("-")?r.style.setProperty(n,t):r.style[n]=t}function a(r,e,...n){e=null!=e?e:{};let a=t(n).concat(t(e.children));if("function"==typeof r)return r(Object.assign(Object.assign({},e),{children:a}));{const n=document.createElement(r);return i(n,a),function(r,e){for(const[n,t]of Object.entries(e))if(void 0!==t)switch(n){case"class":case"className":r.setAttribute("class",t);break;case"style":o(r,t);break;case"dangerouslySetInnerHTML":r.innerHTML=t.__html;break;default:n.startsWith("on")?r.addEventListener(n.slice(2).toLowerCase(),t):r.setAttribute(n,t)}}(n,null!=e?e:{}),n}}function u(r){let e=document.createDocumentFragment();return i(e,t(r.children)),e}function c(r){return r instanceof Node?r:null}n.r(e),n.d(e,{Children:()=>l,Fragment:()=>u,createElement:()=>a,default:()=>f,toNode:()=>c});const l={toArray:t},f={createElement:a,Fragment:u}},(r,e,n)=>{n.r(e),n.d(e,{EXAM_ID:()=>d,NO_LEAVE_CHECK:()=>f,SERVER:()=>u,SORT_PROBLEMS:()=>l,SYNC_ANSWERS:()=>c,TOKEN:()=>s,USERNAME:()=>a});var t=n(8);class i{constructor(r){this._value=null,this._value=null!=r?r:null}get value(){return this._value}set value(r){this._value=r}}class o extends i{constructor(r,e){super(),this.name=r;let n=t.default.getValue(r);void 0===n&&(n=e),this.value=null!=n?n:null}get value(){return super.value}set value(r){t.default.setValue(this.name,r),super.value=r}}const a=new o("username"),u=new o("server"),c=new o("sync_answers",!0),l=new o("sort_problems",!0),f=new o("no_leave_check",!0),s=new i,d=new i},(r,e,n)=>{n.r(e),n.d(e,{hookXHR:()=>i});var t=n(9);function i(r){const e=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(n,i){const o=r.call(this,(0,t.newURL)(i)),a=this.send;this.send=function(r){void 0!==o?o(r).then((r=>{a.call(this,r),this.send=a})).catch(t.devLog):(a.call(this,r),this.send=a)},e.apply(this,arguments)}}},(r,e,n)=>{var t;function i(r){return r===t.SingleChoice||r===t.MultipleChoice||r===t.Polling}n.r(e),n.d(e,{ProblemType:()=>t,isChoice:()=>i}),function(r){r[r.SingleChoice=1]="SingleChoice",r[r.MultipleChoice=2]="MultipleChoice",r[r.Polling=3]="Polling",r[r.FillBlank=4]="FillBlank",r[r.ShortAnswer=5]="ShortAnswer",r[r.Judgement=6]="Judgement"}(t||(t={}))},(r,e,n)=>{n.r(e),n.d(e,{CHOICE_MAP:()=>c,UI:()=>l,showConfirmUpload:()=>f});var t=n(18),i=n(13),o=n(19),a=n(9),u=n(10);const c=new a.Map2((()=>new Map));class l{constructor(r){document.head.append(i.default.createElement("style",null,u.default.toString()));const e=document.body.querySelector(".header-title");e.classList.add(u.clickable),e.addEventListener("click",(()=>{(0,o.showSettings)()}));let n=[];!0===r.data.has_problem_dict?r.data.problems.forEach((r=>{n=n.concat(r.problems)})):n=r.data.problems;const a=new Map;document.body.querySelectorAll(".exam-main--body .subject-item").forEach(((r,e)=>{var i;const o=n[e],u=null!==(i=c.get(o.problem_id))&&void 0!==i?i:new Map;a.set(o.problem_id,new t.Card(o,r,(r=>{var e;return null!==(e=u.get(r))&&void 0!==e?e:r})))})),this.problems=a}updateAnswer({username:r,problem_id:e,result:n}){var t;null===(t=this.problems.get(e))||void 0===t||t.updateAnswer(r,n)}updateUI(){this.problems.forEach((r=>r.updateUI()))}}function f(r,e){const n=(0,a.openWin)("上传图片",{width:300,height:200});n.document.body.append(i.default.createElement("div",{className:[u.uploadImg,u.mainBody].join(" ")},i.default.createElement("div",{className:[u.uploadImgConfirm].join(" ")},i.default.createElement("button",{"on-click":()=>{e(),n.close()},className:[u.clickable].join(" ")},"确认上传"),i.default.createElement("span",null,i.default.createElement("i",null,"*关闭窗口以取消上传"))),i.default.createElement("div",{className:[u.uploadImgImage].join(" ")},i.default.createElement("img",{src:r}))))}},(r,e,n)=>{n.r(e),n.d(e,{Card:()=>o});var t=n(43),i=n(16);class o{constructor(r,e,n){let o;switch(r.ProblemType){case i.ProblemType.SingleChoice:case i.ProblemType.MultipleChoice:case i.ProblemType.Judgement:case i.ProblemType.Polling:o=t.Problem.makeChoice(r.problem_id);break;case i.ProblemType.FillBlank:o=t.Problem.makeBlank(r.problem_id);break;case i.ProblemType.ShortAnswer:o=t.Problem.makeText(r.problem_id)}this.card=t.Card.make(o,e,n),this.type_=r.ProblemType}updateAnswer(r,e){let n;switch(this.type_){case i.ProblemType.SingleChoice:case i.ProblemType.MultipleChoice:case i.ProblemType.Judgement:case i.ProblemType.Polling:n=t.Answer.makeChoice(e);break;case i.ProblemType.FillBlank:n=t.Answer.makeBlank(e);break;case i.ProblemType.ShortAnswer:n=t.Answer.makeText(e)}t.Card.updateAnswer(this.card,r,n)}updateUI(){t.Card.updateUI(this.card)}}},(r,e,n)=>{n.r(e),n.d(e,{showSettings:()=>u});var t=n(9),i=n(13),o=n(20),a=n(10);function u(){(0,t.openWin)("设置",{height:300,width:400}).document.body.appendChild(i.default.createElement("div",{className:[a.mainBody,a.settings].join(" ")},o.make()))}},(r,e,n)=>{n.r(e),n.d(e,{Entry:()=>v,React:()=>{},ReactDOMRe:()=>{},TitleText:()=>s,make:()=>_,style:()=>l});var t=n(21),i=n(26),o=n(31),a=n(24),u=n(10),c=n(14),l=u;function f(r){var e=r.title,n=r.content;return t.DOMRe.createDOMElementVariadic("p",void 0,[t.DOMRe.createDOMElementVariadic("strong",void 0,[e]),o.getWithDefault(o.map(n,(function(r){return r})),null)])}var s={make:f};function d(r){var e,n=r.name,i=r.title,o=r.ty,u=r.required,c=r.pattern,f={title:i,name:n,type:(e=0===o.TAG?["text",o._0,void 0]:["checkbox",void 0,o._0])[0]},s=e[2];void 0!==s&&(f.checked=a.valFromOption(s)),void 0!==c&&(f.pattern=a.valFromOption(c)),void 0!==u&&(f.required=a.valFromOption(u));var d=e[1];return void 0!==d&&(f.value=a.valFromOption(d)),t.DOMRe.createDOMElementVariadic("div",{className:l.settingsEntry},[t.DOMRe.createDOMElementVariadic("label",{htmlFor:n},[i]),t.DOMRe.createDOMElementVariadic("input",a.some(f),[])])}var v={make:d};function _(r){return t.DOMRe.createDOMElementVariadic("div",void 0,[t.DOMRe.createDOMElementVariadic("form",{onSubmit:function(r){return(r=>{r.preventDefault();const e=new FormData(this);c.USERNAME.value=e.get("username"),c.SERVER.value=e.get("server"),c.NO_LEAVE_CHECK.value="on"===e.get("no_leave_check"),c.SORT_PROBLEMS.value="on"===e.get("sort_problems"),c.SYNC_ANSWERS.value="on"===e.get("sync_answers")})(r)}},[t.createElement(d,{name:"username",title:"用户名",ty:{TAG:0,_0:c.USERNAME.value}}),t.createElement(d,{name:"server",title:"服务器",ty:{TAG:0,_0:c.SERVER.value}}),t.createElement(d,{name:"sync_answers",title:"同步答案",ty:{TAG:1,_0:c.SYNC_ANSWERS.value}}),t.createElement(d,{name:"sort_problems",title:"排序答案",ty:{TAG:1,_0:c.SORT_PROBLEMS.value}}),t.createElement(d,{name:"no_leave_check",title:"拦截切屏检测",ty:{TAG:1,_0:c.NO_LEAVE_CHECK.value}}),t.DOMRe.createDOMElementVariadic("div",{className:l.settingsSubmit},[t.DOMRe.createDOMElementVariadic("div",{className:l.settingsSubmitTip},[t.DOMRe.createDOMElementVariadic("i",void 0,["*更改设置后请刷新页面"])]),t.DOMRe.createDOMElementVariadic("div",void 0,[t.DOMRe.createDOMElementVariadic("button",void 0,["提交"])])])]),t.DOMRe.createDOMElementVariadic("div",{className:l.about},[t.createElement(f,{title:"功能特性："}),t.createElementVariadic(i.UList.make,{children:null},[t.createElement(f,{title:"同步答案：",content:"点击题目显示详细答案，在选项/填空处悬停显示简略答案"}),t.createElement(f,{title:"排序题目：",content:"根据 ID 对题目和选项进行重新排序"}),t.createElement(f,{title:"拦截切屏检测：",content:"随意切换页面、窗口不会被发现"}),t.createElement(f,{title:"拦截上传截图：",content:"仅当用户确认后，才会上传截图"}),t.createElement(f,{title:"拦截异常状态：",content:"即使本地显示异常也不会推送到服务器"})])])])}},(r,e,n)=>{n.r(e),n.d(e,{Children:()=>c,DOMRe:()=>s,Fragment:()=>d,Props:()=>{},_recks:()=>a,createElement:()=>f,createElementVariadic:()=>l,toNode:()=>u});var t=n(13),i=n(24),o=n(25),a=t;function u(r){return i.nullable_to_opt(a.toNode(r))}var c={toArray:function(r){return a.Children.toArray(r)}};function l(r,e,n){return o.spliceApply(t.createElement,[r,e,n])}function f(r,e){return t.createElement(r,e)}var s={createDOMElementVariadic:function(r,e,n){return o.spliceApply(t.createElement,[r,void 0!==e?i.valFromOption(e):void 0,n])},createElement:function(r,e,n){return o.spliceApply(t.createElement,[r,void 0!==e?i.valFromOption(e):void 0,n])}};var d={make:function(r){var e=r.children;return a.Fragment({children:e})}}},(r,e,n)=>{n.r(e),n.d(e,{_1:()=>o,_2:()=>u,_3:()=>l,_4:()=>s,_5:()=>v,_6:()=>m,_7:()=>p,_8:()=>y,__1:()=>a,__2:()=>c,__3:()=>f,__4:()=>d,__5:()=>_,__6:()=>h,__7:()=>g,__8:()=>E,app:()=>i});var t=n(23);function i(r,e){for(;;){var n=e,o=r,a=o.length,u=0===a?1:a,c=u-n.length|0;if(0===c)return o.apply(null,n);if(c>=0)return function(r,e){return function(n){return i(r,e.concat([n]))}}(o,n);e=t.sub(n,u,0|-c),r=o.apply(null,t.sub(n,0,u))}}function o(r,e){var n=r.length;if(1===n)return r(e);switch(n){case 1:return r(e);case 2:return function(n){return r(e,n)};case 3:return function(n,t){return r(e,n,t)};case 4:return function(n,t,i){return r(e,n,t,i)};case 5:return function(n,t,i,o){return r(e,n,t,i,o)};case 6:return function(n,t,i,o,a){return r(e,n,t,i,o,a)};case 7:return function(n,t,i,o,a,u){return r(e,n,t,i,o,a,u)};default:return i(r,[e])}}function a(r){return 1===r.length?r:function(e){return o(r,e)}}function u(r,e,n){var t=r.length;if(2===t)return r(e,n);switch(t){case 1:return i(r(e),[n]);case 2:return r(e,n);case 3:return function(t){return r(e,n,t)};case 4:return function(t,i){return r(e,n,t,i)};case 5:return function(t,i,o){return r(e,n,t,i,o)};case 6:return function(t,i,o,a){return r(e,n,t,i,o,a)};case 7:return function(t,i,o,a,u){return r(e,n,t,i,o,a,u)};default:return i(r,[e,n])}}function c(r){return 2===r.length?r:function(e,n){return u(r,e,n)}}function l(r,e,n,t){var o=r.length;if(3===o)return r(e,n,t);switch(o){case 1:return i(r(e),[n,t]);case 2:return i(r(e,n),[t]);case 3:return r(e,n,t);case 4:return function(i){return r(e,n,t,i)};case 5:return function(i,o){return r(e,n,t,i,o)};case 6:return function(i,o,a){return r(e,n,t,i,o,a)};case 7:return function(i,o,a,u){return r(e,n,t,i,o,a,u)};default:return i(r,[e,n,t])}}function f(r){return 3===r.length?r:function(e,n,t){return l(r,e,n,t)}}function s(r,e,n,t,o){var a=r.length;if(4===a)return r(e,n,t,o);switch(a){case 1:return i(r(e),[n,t,o]);case 2:return i(r(e,n),[t,o]);case 3:return i(r(e,n,t),[o]);case 4:return r(e,n,t,o);case 5:return function(i){return r(e,n,t,o,i)};case 6:return function(i,a){return r(e,n,t,o,i,a)};case 7:return function(i,a,u){return r(e,n,t,o,i,a,u)};default:return i(r,[e,n,t,o])}}function d(r){return 4===r.length?r:function(e,n,t,i){return s(r,e,n,t,i)}}function v(r,e,n,t,o,a){var u=r.length;if(5===u)return r(e,n,t,o,a);switch(u){case 1:return i(r(e),[n,t,o,a]);case 2:return i(r(e,n),[t,o,a]);case 3:return i(r(e,n,t),[o,a]);case 4:return i(r(e,n,t,o),[a]);case 5:return r(e,n,t,o,a);case 6:return function(i){return r(e,n,t,o,a,i)};case 7:return function(i,u){return r(e,n,t,o,a,i,u)};default:return i(r,[e,n,t,o,a])}}function _(r){return 5===r.length?r:function(e,n,t,i,o){return v(r,e,n,t,i,o)}}function m(r,e,n,t,o,a,u){var c=r.length;if(6===c)return r(e,n,t,o,a,u);switch(c){case 1:return i(r(e),[n,t,o,a,u]);case 2:return i(r(e,n),[t,o,a,u]);case 3:return i(r(e,n,t),[o,a,u]);case 4:return i(r(e,n,t,o),[a,u]);case 5:return i(r(e,n,t,o,a),[u]);case 6:return r(e,n,t,o,a,u);case 7:return function(i){return r(e,n,t,o,a,u,i)};default:return i(r,[e,n,t,o,a,u])}}function h(r){return 6===r.length?r:function(e,n,t,i,o,a){return m(r,e,n,t,i,o,a)}}function p(r,e,n,t,o,a,u,c){var l=r.length;if(7===l)return r(e,n,t,o,a,u,c);switch(l){case 1:return i(r(e),[n,t,o,a,u,c]);case 2:return i(r(e,n),[t,o,a,u,c]);case 3:return i(r(e,n,t),[o,a,u,c]);case 4:return i(r(e,n,t,o),[a,u,c]);case 5:return i(r(e,n,t,o,a),[u,c]);case 6:return i(r(e,n,t,o,a,u),[c]);case 7:return r(e,n,t,o,a,u,c);default:return i(r,[e,n,t,o,a,u,c])}}function g(r){return 7===r.length?r:function(e,n,t,i,o,a,u){return p(r,e,n,t,i,o,a,u)}}function y(r,e,n,t,o,a,u,c,l){var f=r.length;if(8===f)return r(e,n,t,o,a,u,c,l);switch(f){case 1:return i(r(e),[n,t,o,a,u,c,l]);case 2:return i(r(e,n),[t,o,a,u,c,l]);case 3:return i(r(e,n,t),[o,a,u,c,l]);case 4:return i(r(e,n,t,o),[a,u,c,l]);case 5:return i(r(e,n,t,o,a),[u,c,l]);case 6:return i(r(e,n,t,o,a,u),[c,l]);case 7:return i(r(e,n,t,o,a,u,c),[l]);default:return i(r,[e,n,t,o,a,u,c,l])}}function E(r){return 8===r.length?r:function(e,n,t,i,o,a,u,c){return y(r,e,n,t,i,o,a,u,c)}}},(r,e,n)=>{function t(r,e,n){for(var t=new Array(n),i=0,o=e;i<n;)t[i]=r[o],i=i+1|0,o=o+1|0;return t}function i(r){var e=function(r,e){for(;;){var n=e,t=r;if(!n)return t;e=n.tl,r=n.hd.length+t|0}}(0,r),n=new Array(e);return function(r,e,n){for(;;){var t=n,i=e;if(!t)return;for(var o=t.hd,a=o.length,u=i,c=0;c<a;)r[u]=o[c],u=u+1|0,c=c+1|0;n=t.tl,e=u}}(n,0,r),n}function o(r,e,n){if(e<0||e>=r.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};r[e]=n}function a(r,e){if(e<0||e>=r.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};return r[e]}function u(r,e){for(var n=new Array(r),t=0;t<r;++t)n[t]=e;return n}function c(r){for(var e=new Array(r),n=0;n<r;++n)e[n]=0;return e}function l(r,e,n,t,i){if(t<=e)for(var o=0;o<i;++o)n[o+t|0]=r[o+e|0];else for(var a=i-1|0;a>=0;--a)n[a+t|0]=r[a+e|0]}function f(r){return r.slice(0)}n.r(e),n.d(e,{blit:()=>l,concat:()=>i,dup:()=>f,get:()=>a,make:()=>u,make_float:()=>c,set:()=>o,sub:()=>t})},(r,e,n)=>{function t(r){return void 0!==r.BS_PRIVATE_NESTED_SOME_NONE}function i(r){return void 0===r?{BS_PRIVATE_NESTED_SOME_NONE:0}:null!==r&&void 0!==r.BS_PRIVATE_NESTED_SOME_NONE?{BS_PRIVATE_NESTED_SOME_NONE:r.BS_PRIVATE_NESTED_SOME_NONE+1|0}:r}function o(r){return null==r?void 0:i(r)}function a(r){return void 0===r?void 0:i(r)}function u(r){return null===r?void 0:i(r)}function c(r){if(null===r||void 0===r.BS_PRIVATE_NESTED_SOME_NONE)return r;var e=r.BS_PRIVATE_NESTED_SOME_NONE;return 0===e?void 0:{BS_PRIVATE_NESTED_SOME_NONE:e-1|0}}function l(r){return void 0===r?void 0:c(r)}function f(r){return void 0!==r?r.VAL:r}n.r(e),n.d(e,{isNested:()=>t,null_to_opt:()=>u,nullable_to_opt:()=>o,option_get:()=>l,option_unwrap:()=>f,some:()=>i,undefined_to_opt:()=>a,valFromOption:()=>c})},(r,e,n)=>{n.r(e),n.d(e,{spliceApply:()=>t,spliceObjApply:()=>i});var t=function(r,e){var n,t;t=e.length;var i=[];for(n=0;n<t-1;++n)i.push(e[n]);var o=e[t-1];for(n=0;n<o.length;++n)i.push(o[n]);return r.apply(null,i)},i=function(r,e,n){var t,i;i=n.length;var o=[];for(t=0;t<i-1;++t)o.push(n[t]);var a=n[i-1];for(t=0;t<a.length;++t)o.push(a[t]);return r[e].apply(r,o)}},(r,e,n)=>{n.r(e),n.d(e,{React:()=>{},ReactDOMRe:()=>{},UList:()=>d,openWin:()=>v,querySelectorAllElements:()=>s,styleCss:()=>f});var t=n(21),i=n(27),o=n(31),a=n(24),u=n(10),c=n(32),l=n(41),f=u.default;function s(r,e){return i.keepMap(Array.prototype.slice.call(r.querySelectorAll(e)),c.ofNode)}var d={make:function(r){var e=r.children;return t.DOMRe.createDOMElementVariadic("ul",void 0,[t.Children.toArray(e).map((function(r){return t.DOMRe.createDOMElementVariadic("li",void 0,[r])}))])}};function v(r,e,n,u,c,s){return o.flatMap(a.nullable_to_opt(window.open("","",i.joinWith([["location","no"],["height",String(e)],["width",String(n)],["left",String(o.getWithDefault(u,0))],["top",String(o.getWithDefault(c,0))]],",",(function(r){return r[0]+"="+r[1]})))),(function(e){return o.map(l.asHtmlDocument(e.document),(function(n){return o.forEach(t.toNode(t.createElementVariadic(t.Fragment.make,{children:null},[t.DOMRe.createDOMElementVariadic("title",void 0,[r]),t.DOMRe.createDOMElementVariadic("style",void 0,[f.toString()])])),(function(r){n.head.appendChild(r)})),[e,n]}))}))}},(r,e,n)=>{n.r(e),n.d(e,{blit:()=>C,blitUnsafe:()=>I,cmp:()=>pr,cmpU:()=>hr,concat:()=>A,concatMany:()=>k,eq:()=>mr,eqU:()=>_r,every:()=>ar,every2:()=>sr,every2U:()=>fr,everyU:()=>or,fill:()=>D,forEach:()=>P,forEachU:()=>x,forEachWithIndex:()=>z,forEachWithIndexU:()=>G,get:()=>u,getBy:()=>q,getByU:()=>L,getExn:()=>c,getIndexBy:()=>j,getIndexByU:()=>J,joinWith:()=>wr,joinWithU:()=>br,keep:()=>B,keepMap:()=>H,keepMapU:()=>X,keepU:()=>V,keepWithIndex:()=>F,keepWithIndexU:()=>W,make:()=>h,makeBy:()=>g,makeByAndShuffle:()=>E,makeByAndShuffleU:()=>y,makeByU:()=>p,map:()=>U,mapU:()=>T,mapWithIndex:()=>Y,mapWithIndexU:()=>K,partition:()=>yr,partitionU:()=>gr,range:()=>b,rangeBy:()=>w,reduce:()=>Q,reduceReverse:()=>rr,reduceReverse2:()=>nr,reduceReverse2U:()=>er,reduceReverseU:()=>$,reduceU:()=>Z,reduceWithIndex:()=>ir,reduceWithIndexU:()=>tr,reverse:()=>m,reverseInPlace:()=>_,set:()=>l,setExn:()=>f,shuffle:()=>v,shuffleInPlace:()=>d,slice:()=>N,sliceToEnd:()=>M,some:()=>cr,some2:()=>vr,some2U:()=>dr,someU:()=>ur,unzip:()=>Er,zip:()=>S,zipBy:()=>O,zipByU:()=>R});var t=n(28),i=n(22),o=n(29),a=n(24);function u(r,e){if(e>=0&&e<r.length)return a.some(r[e])}function c(r,e){if(!(e>=0&&e<r.length))throw{RE_EXN_ID:"Assert_failure",_1:["belt_Array.ml",27,4],Error:new Error};return r[e]}function l(r,e,n){return e>=0&&e<r.length&&(r[e]=n,!0)}function f(r,e,n){if(!(e>=0&&e<r.length))throw{RE_EXN_ID:"Assert_failure",_1:["belt_Array.ml",33,2],Error:new Error};r[e]=n}function s(r,e,n){var t=r[e];r[e]=r[n],r[n]=t}function d(r){for(var e=r.length,n=0;n<e;++n)s(r,n,o.random_int(n,e))}function v(r){var e=r.slice(0);return d(e),e}function _(r){for(var e=r.length,n=0,t=e/2|0;n<t;++n)s(r,0+n|0,((0+e|0)-n|0)-1|0)}function m(r){for(var e=r.length,n=new Array(e),t=0;t<e;++t)n[t]=r[(e-1|0)-t|0];return n}function h(r,e){if(r<=0)return[];for(var n=new Array(r),t=0;t<r;++t)n[t]=e;return n}function p(r,e){if(r<=0)return[];for(var n=new Array(r),t=0;t<r;++t)n[t]=e(t);return n}function g(r,e){return p(r,i.__1(e))}function y(r,e){var n=p(r,e);return d(n),n}function E(r,e){return y(r,i.__1(e))}function b(r,e){var n=e-r|0;if(n<0)return[];for(var t=new Array(n+1|0),i=0;i<=n;++i)t[i]=r+i|0;return t}function w(r,e,n){var t=e-r|0;if(t<0||n<=0)return[];for(var i=1+(t/n|0)|0,o=new Array(i),a=r,u=0;u<i;++u)o[u]=a,a=a+n|0;return o}function S(r,e){for(var n=r.length,t=e.length,i=n<t?n:t,o=new Array(i),a=0;a<i;++a)o[a]=[r[a],e[a]];return o}function R(r,e,n){for(var t=r.length,i=e.length,o=t<i?t:i,a=new Array(o),u=0;u<o;++u)a[u]=n(r[u],e[u]);return a}function O(r,e,n){return R(r,e,i.__2(n))}function A(r,e){for(var n=r.length,t=e.length,i=new Array(n+t|0),o=0;o<n;++o)i[o]=r[o];for(var a=0;a<t;++a)i[n+a|0]=e[a];return i}function k(r){for(var e=r.length,n=0,t=0;t<e;++t)n=n+r[t].length|0;var i=new Array(n);n=0;for(var o=0;o<e;++o)for(var a=r[o],u=0,c=a.length;u<c;++u)i[n]=a[u],n=n+1|0;return i}function N(r,e,n){if(n<=0)return[];var i=r.length,o=e<0?t.caml_int_max(i+e|0,0):e,a=i-o|0,u=a<n?a:n;if(u<=0)return[];for(var c=new Array(u),l=0;l<u;++l)c[l]=r[o+l|0];return c}function M(r,e){for(var n=r.length,i=e<0?t.caml_int_max(n+e|0,0):e,o=n-i|0,a=new Array(o),u=0;u<o;++u)a[u]=r[i+u|0];return a}function D(r,e,n,i){if(!(n<=0)){var o=r.length,a=e<0?t.caml_int_max(o+e|0,0):e,u=o-a|0,c=u<n?u:n;if(!(c<=0))for(var l=a,f=a+c|0;l<f;++l)r[l]=i}}function I(r,e,n,t,i){if(t<=e)for(var o=0;o<i;++o)n[o+t|0]=r[o+e|0];else for(var a=i-1|0;a>=0;--a)n[a+t|0]=r[a+e|0]}function C(r,e,n,i,o){var a=r.length,u=n.length,c=e<0?t.caml_int_max(a+e|0,0):e,l=i<0?t.caml_int_max(u+i|0,0):i,f=t.caml_int_min(o,t.caml_int_min(a-c|0,u-l|0));if(l<=c)for(var s=0;s<f;++s)n[s+l|0]=r[s+c|0];else for(var d=f-1|0;d>=0;--d)n[d+l|0]=r[d+c|0]}function x(r,e){for(var n=0,t=r.length;n<t;++n)e(r[n])}function P(r,e){return x(r,i.__1(e))}function T(r,e){for(var n=r.length,t=new Array(n),i=0;i<n;++i)t[i]=e(r[i]);return t}function U(r,e){return T(r,i.__1(e))}function L(r,e){for(var n,t=r.length,i=0;void 0===n&&i<t;){var o=r[i];e(o)&&(n=a.some(o)),i=i+1|0}return n}function q(r,e){return L(r,i.__1(e))}function J(r,e){for(var n,t=r.length,i=0;void 0===n&&i<t;){e(r[i])&&(n=i),i=i+1|0}return n}function j(r,e){return J(r,i.__1(e))}function V(r,e){for(var n=r.length,t=new Array(n),i=0,o=0;o<n;++o){var a=r[o];e(a)&&(t[i]=a,i=i+1|0)}return t.length=i,t}function B(r,e){return V(r,i.__1(e))}function W(r,e){for(var n=r.length,t=new Array(n),i=0,o=0;o<n;++o){var a=r[o];e(a,o)&&(t[i]=a,i=i+1|0)}return t.length=i,t}function F(r,e){return W(r,i.__2(e))}function X(r,e){for(var n=r.length,t=new Array(n),i=0,o=0;o<n;++o){var u=e(r[o]);void 0!==u&&(t[i]=a.valFromOption(u),i=i+1|0)}return t.length=i,t}function H(r,e){return X(r,i.__1(e))}function G(r,e){for(var n=0,t=r.length;n<t;++n)e(n,r[n])}function z(r,e){return G(r,i.__2(e))}function K(r,e){for(var n=r.length,t=new Array(n),i=0;i<n;++i)t[i]=e(i,r[i]);return t}function Y(r,e){return K(r,i.__2(e))}function Z(r,e,n){for(var t=e,i=0,o=r.length;i<o;++i)t=n(t,r[i]);return t}function Q(r,e,n){return Z(r,e,i.__2(n))}function $(r,e,n){for(var t=e,i=r.length-1|0;i>=0;--i)t=n(t,r[i]);return t}function rr(r,e,n){return $(r,e,i.__2(n))}function er(r,e,n,i){for(var o=n,a=t.caml_int_min(r.length,e.length)-1|0;a>=0;--a)o=i(o,r[a],e[a]);return o}function nr(r,e,n,t){return er(r,e,n,i.__3(t))}function tr(r,e,n){for(var t=e,i=0,o=r.length;i<o;++i)t=n(t,r[i],i);return t}function ir(r,e,n){return tr(r,e,i.__3(n))}function or(r,e){for(var n=r.length,t=0;;){var i=t;if(i===n)return!0;if(!e(r[i]))return!1;t=i+1|0}}function ar(r,e){return or(r,i.__1(e))}function ur(r,e){for(var n=r.length,t=0;;){var i=t;if(i===n)return!1;if(e(r[i]))return!0;t=i+1|0}}function cr(r,e){return ur(r,i.__1(e))}function lr(r,e,n,t,i){for(;;){var o=n;if(o===i)return!0;if(!t(r[o],e[o]))return!1;n=o+1|0}}function fr(r,e,n){return lr(r,e,0,n,t.caml_int_min(r.length,e.length))}function sr(r,e,n){return fr(r,e,i.__2(n))}function dr(r,e,n){for(var i=0,o=t.caml_int_min(r.length,e.length);;){var a=i;if(a===o)return!1;if(n(r[a],e[a]))return!0;i=a+1|0}}function vr(r,e,n){return dr(r,e,i.__2(n))}function _r(r,e,n){var t=r.length;return t===e.length&&lr(r,e,0,n,t)}function mr(r,e,n){return _r(r,e,i.__2(n))}function hr(r,e,n){var t=r.length,i=e.length;if(t>i)return 1;if(t<i)return-1;for(var o=0;;){var a=o;if(a===t)return 0;var u=n(r[a],e[a]);if(0!==u)return u;o=a+1|0}}function pr(r,e,n){return hr(r,e,i.__2(n))}function gr(r,e){for(var n=r.length,t=0,i=0,o=new Array(n),a=new Array(n),u=0;u<n;++u){var c=r[u];e(c)?(o[t]=c,t=t+1|0):(a[i]=c,i=i+1|0)}return o.length=t,a.length=i,[o,a]}function yr(r,e){return gr(r,i.__1(e))}function Er(r){for(var e=r.length,n=new Array(e),t=new Array(e),i=0;i<e;++i){var o=r[i];n[i]=o[0],t[i]=o[1]}return[n,t]}function br(r,e,n){var t=r.length;if(0===t)return"";for(var i=t-1|0,o=0,a="";;){var u=a,c=o;if(c===i)return u+n(r[c]);a=u+(n(r[c])+e),o=c+1|0}}function wr(r,e,n){return br(r,e,i.__1(n))}},(r,e,n)=>{function t(r,e){return r<e?-1:r===e?0:1}function i(r,e){return r?e?0:1:e?-1:0}function o(r,e){return r===e?0:r<e?-1:r>e||r==r?1:e==e?-1:0}function a(r,e){return r===e?0:r<e?-1:1}function u(r,e){return r?e:r}function c(r,e){return r<e?r:e}function l(r,e){return r<e?r:e}function f(r,e){return r<e?r:e}function s(r,e){return r<e?r:e}function d(r,e){return r||e}function v(r,e){return r>e?r:e}function _(r,e){return r>e?r:e}function m(r,e){return r>e?r:e}function h(r,e){return r>e?r:e}function p(r,e){return r[1]===e[1]&&r[0]===e[0]}function g(r,e){var n=e[0],t=r[0];return t>n||!(t<n)&&r[1]>=e[1]}function y(r,e){return!p(r,e)}function E(r,e){return!g(r,e)}function b(r,e){return r[0]>e[0]||!(r[0]<e[0])&&r[1]>e[1]}function w(r,e){return!b(r,e)}function S(r,e){return g(r,e)?e:r}function R(r,e){return b(r,e)?r:e}n.r(e),n.d(e,{caml_bool_compare:()=>i,caml_bool_max:()=>d,caml_bool_min:()=>u,caml_float_compare:()=>o,caml_float_max:()=>_,caml_float_min:()=>l,caml_int32_max:()=>h,caml_int32_min:()=>s,caml_int_compare:()=>t,caml_int_max:()=>v,caml_int_min:()=>c,caml_string_compare:()=>a,caml_string_max:()=>m,caml_string_min:()=>f,i64_eq:()=>p,i64_ge:()=>g,i64_gt:()=>b,i64_le:()=>w,i64_lt:()=>E,i64_max:()=>R,i64_min:()=>S,i64_neq:()=>y})},(r,e,n)=>{n.r(e),n.d(e,{ceil:()=>l,ceil_int:()=>o,floor:()=>f,floor_int:()=>u,random_int:()=>c,unsafe_ceil:()=>i,unsafe_floor:()=>a});var t=n(30);function i(r){return Math.ceil(r)}function o(r){return r>t.max?t.max:r<t.min?t.min:Math.ceil(r)}function a(r){return Math.floor(r)}function u(r){return r>t.max?t.max:r<t.min?t.min:Math.floor(r)}function c(r,e){return u(Math.random()*(e-r|0))+r|0}var l=o,f=u},(r,e,n)=>{function t(r,e){return r===e}n.r(e),n.d(e,{equal:()=>t,max:()=>i,min:()=>o});var i=2147483647,o=-2147483648},(r,e,n)=>{n.r(e),n.d(e,{cmp:()=>w,cmpU:()=>b,eq:()=>E,eqU:()=>y,flatMap:()=>m,flatMapU:()=>_,forEach:()=>c,forEachU:()=>u,getExn:()=>l,getWithDefault:()=>h,isNone:()=>g,isSome:()=>p,keep:()=>a,keepU:()=>o,map:()=>v,mapU:()=>d,mapWithDefault:()=>s,mapWithDefaultU:()=>f});var t=n(22),i=n(24);function o(r,e){if(void 0!==r&&e(i.valFromOption(r)))return r}function a(r,e){return o(r,t.__1(e))}function u(r,e){if(void 0!==r)return e(i.valFromOption(r))}function c(r,e){return u(r,t.__1(e))}function l(r){if(void 0!==r)return i.valFromOption(r);throw{RE_EXN_ID:"Not_found",Error:new Error}}function f(r,e,n){return void 0!==r?n(i.valFromOption(r)):e}function s(r,e,n){return f(r,e,t.__1(n))}function d(r,e){if(void 0!==r)return i.some(e(i.valFromOption(r)))}function v(r,e){return d(r,t.__1(e))}function _(r,e){if(void 0!==r)return e(i.valFromOption(r))}function m(r,e){return _(r,t.__1(e))}function h(r,e){return void 0!==r?i.valFromOption(r):e}function p(r){return void 0!==r}function g(r){return void 0===r}function y(r,e,n){return void 0!==r?void 0!==e&&n(i.valFromOption(r),i.valFromOption(e)):void 0===e}function E(r,e,n){return y(r,e,t.__2(n))}function b(r,e,n){return void 0!==r?void 0!==e?n(i.valFromOption(r),i.valFromOption(e)):1:void 0!==e?-1:0}function w(r,e,n){return b(r,e,t.__2(n))}},(r,e,n)=>{n.r(e),n.d(e,{Impl:()=>_,asHtmlElement:()=>v,insertAdjacentElement:()=>h,insertAdjacentHTML:()=>p,insertAdjacentText:()=>g,nodeType:()=>y,ofNode:()=>d});var t=n(24),i=n(33),o=n(34),a=n(36),u=n(37),c=n(38),l=n(35),f=n(39),s=n(40);function d(r){if(0===i.nodeType(r))return t.some(r)}var v=function(r){if(void 0!==window.constructor.name&&/^HTML\w*Element$/.test(r.constructor.name)||/^\[object HTML\w*Element\]$/.test(r.constructor.toString()))return r};function _(r){return{asHtmlElement:v,ofNode:d,insertAdjacentElement:function(r,e,n){r.insertAdjacentElement(o.encodeInsertPosition(e),n)},insertAdjacentHTML:function(r,e,n){r.insertAdjacentHTML(o.encodeInsertPosition(e),n)},insertAdjacentText:function(r,e,n){r.insertAdjacentText(o.encodeInsertPosition(e),n)}}}var m=i.Impl({});function h(r,e,n){r.insertAdjacentElement(o.encodeInsertPosition(e),n)}function p(r,e,n){r.insertAdjacentHTML(o.encodeInsertPosition(e),n)}function g(r,e,n){r.insertAdjacentText(o.encodeInsertPosition(e),n)}l.Impl({}),f.Impl({}),c.Impl({}),s.Impl({}),u.Impl({}),a.Impl({});var y=m.nodeType},(r,e,n)=>{n.r(e),n.d(e,{Impl:()=>i,nodeType:()=>o});var t=n(34);function i(r){return{nodeType:function(r){return t.decodeNodeType(r.nodeType)}}}function o(r){return t.decodeNodeType(r.nodeType)}n(35).Impl({})},(r,e,n)=>{function t(r){return r}function i(r){return r+1>>>0>2?3:r+1|0}function o(r){switch(r){case"BackCompat":return 0;case"CSS1Compat":return 1;default:return 2}}function a(r){switch(r){case 0:return"true";case 1:return"false";case 2:return"inherit";case 3:return""}}function u(r){switch(r){case"false":return 1;case"inherit":return 2;case"true":return 0;default:return 3}}function c(r){if(r>2||r<0)throw{RE_EXN_ID:"Invalid_argument",_1:"invalid deltaMode",Error:new Error};return r}function l(r){switch(r){case 0:return"on";case 1:return"off";case 2:return""}}function f(r){switch(r){case"off":return 1;case"on":return 0;default:return 2}}function s(r){switch(r){case 0:return"ltr";case 1:return"rtl";case 2:return""}}function d(r){switch(r){case"ltr":return 0;case"rtl":return 1;default:return 2}}n.r(e),n.d(e,{EventPhase:()=>v,WhatToShow:()=>w,decodeCompareResult:()=>i,decodeCompatMode:()=>o,decodeContentEditable:()=>u,decodeDeltaMode:()=>c,decodeDesignMode:()=>f,decodeDir:()=>d,decodeNodeType:()=>p,decodePointerType:()=>g,decodeReadyState:()=>y,decodeShadowRootMode:()=>E,decodeVisibilityState:()=>b,encodeCompareHow:()=>t,encodeContentEditable:()=>a,encodeDesignMode:()=>l,encodeDir:()=>s,encodeFilterAction:()=>_,encodeInsertPosition:()=>m,encodeModifierKey:()=>h});var v={decode:function(r){return r>3||r<0?4:r}};function _(r){return r+1|0}function m(r){switch(r){case 0:return"beforebegin";case 1:return"afterbegin";case 2:return"beforeend";case 3:return"afterend"}}function h(r){switch(r){case 0:return"Alt";case 1:return"AltGraph";case 2:return"CapsLock";case 3:return"Control";case 4:return"Fn";case 5:return"FnLock";case 6:return"Hyper";case 7:return"Meta";case 8:return"NumLock";case 9:return"ScrollLock";case 10:return"Shift";case 11:return"Super";case 12:return"Symbol";case 13:return"SymbolLock"}}function p(r){return r>12||r<1?12:r-1|0}function g(r){switch(r){case"mouse":return 0;case"pen":return 1;case"touch|":return 2;default:return 3}}function y(r){switch(r){case"complete":return 2;case"interactive":return 1;case"loading":return 0;default:return 3}}function E(r){switch(r){case"closed":return 1;case"open":return 0;default:throw{RE_EXN_ID:"Invalid_argument",_1:"Unknown shadowRootMode",Error:new Error}}}function b(r){switch(r){case"hidden":return 1;case"prerender":return 2;case"unloaded":return 3;case"visible":return 0;default:return 4}}var w={_All:-1,_Element:1,_Attribute:2,_Text:4,_CDATASection:8,_EntityReference:16,_Entity:32,_ProcessingInstruction:64,_Comment:128,_Document:256,_DocumentType:512,_DocumentFragment:1024,_Notation:2048,many:function r(e){return e?e.hd|r(e.tl):0}}},(r,e,n)=>{function t(r){return{}}n.r(e),n.d(e,{Impl:()=>t})},(r,e,n)=>{function t(r){return{}}n.r(e),n.d(e,{Impl:()=>t})},(r,e,n)=>{function t(r){return{}}n.r(e),n.d(e,{Impl:()=>t})},(r,e,n)=>{function t(r){return{}}n.r(e),n.d(e,{Impl:()=>t})},(r,e,n)=>{function t(r){return{}}n.r(e),n.d(e,{Impl:()=>t})},(r,e,n)=>{function t(r){return{}}n.r(e),n.d(e,{Impl:()=>t})},(r,e,n)=>{n.r(e),n.d(e,{Impl:()=>l,asHtmlDocument:()=>s,compatMode:()=>v,nodeType:()=>m,ofNode:()=>d,visibilityState:()=>_});var t=n(24),i=n(33),o=n(34),a=n(38),u=n(35),c=n(42);function l(r){return{asHtmlDocument:function(r){var e=r.defaultView;if(null!=e){var n=e.HTMLDocument;if(null!=n&&r instanceof n)return r}},ofNode:function(r){if(8===i.nodeType(r))return t.some(r)},compatMode:function(r){return o.decodeCompatMode(r.compatMode)},visibilityState:function(r){return o.decodeVisibilityState(r.visibilityState)}}}var f=i.Impl({});u.Impl({}),c.Impl({}),a.Impl({});var s=function(r){var e=r.defaultView;if(null!=e){var n=e.HTMLDocument;if(null!=n&&r instanceof n)return r}};function d(r){if(8===i.nodeType(r))return t.some(r)}function v(r){return o.decodeCompatMode(r.compatMode)}function _(r){return o.decodeVisibilityState(r.visibilityState)}var m=f.nodeType},(r,e,n)=>{function t(r){return{}}n.r(e),n.d(e,{Impl:()=>t})},(r,e,n)=>{n.r(e),n.d(e,{Answer:()=>p,Card:()=>w,Problem:()=>g,React:()=>{},ReactDOMRe:()=>{},Tooltip:()=>E,style:()=>h});var t=n(22),i=n(21),o=n(26),a=n(44),u=n(51),c=n(27),l=n(52),f=n(31),s=n(24),d=n(53),v=n(55),_=n(10),m=n(60),h=_;var p={makeChoice:function(r){return{TAG:0,_0:r}},makeBlank:function(r){return{TAG:1,_0:u.entries(r)}},makeText:function(r){return{TAG:2,_0:r}}};var g={makeChoice:function(r){return{id:r,ty:0}},makeBlank:function(r){return{id:r,ty:1}},makeText:function(r){return{id:r,ty:2}}};function y(r,e){r._ele.setAttribute("title",e)}var E={make:function(r){return{_ele:r}},setContent:y};function b(r,e,n){return f.forEach(o.openWin("详细答案",200,300,n,e,void 0),(function(e){var n=e[1];return f.forEach(i.toNode(i.DOMRe.createDOMElementVariadic("div",{className:c.joinWith([h.mainBody,h.answerDetail]," ",(function(r){return r}))},[r._detailsHtml])),(function(r){return f.forEach(s.nullable_to_opt(n.body),(function(e){e.appendChild(r)}))}))}))}var w={showDetail:b,updateAnswer:function(r,e,n){var t,i=r._details;switch(0|i.TAG){case 0:switch(0|n.TAG){case 0:t={TAG:0,_0:d.set(i._0,e,n._0)};break;case 1:case 2:t=r._details}break;case 1:switch(0|n.TAG){case 1:t={TAG:1,_0:d.set(i._0,e,n._0)};break;case 0:case 2:t=r._details}break;case 2:switch(0|n.TAG){case 0:case 1:t=r._details;break;case 2:t={TAG:2,_0:d.set(i._0,e,n._0)}}}r._details=t},updateUI:function(r){var e,n=function(r,e){return String(l.div(Math.imul(r,100),e))+"%"},u=function(r){return v.stableSortBy(r,(function(r,e){return a.compare(r[0],e[0])}))},_=r._details;switch(0|_.TAG){case 0:var p=_._0;e=c.map(u(c.map(d.toArray(d.reduce(p,void 0,(function(r,e,n){return c.reduce(n,r,(function(r,n){return d.update(r,n,(function(r){return c.concat(f.getWithDefault(r,[]),[e])}))}))}))),(function(e){return[t._1(r._choiceMap,e[0]),e[1]]}))),(function(e){var t=e[1],a=e[0];return f.forEach(d.get(r._tooltips,a),(function(r){return y(r,n(t.length,d.size(p)))})),i.DOMRe.createDOMElementVariadic("div",void 0,[i.DOMRe.createDOMElementVariadic("p",void 0,[i.DOMRe.createDOMElementVariadic("strong",void 0,[a])]),i.createElement(o.UList.make,{children:c.map(m.stableSort(t),(function(r){return i.DOMRe.createDOMElementVariadic("p",void 0,[r])}))})])}));break;case 1:var g=_._0;e=c.map(u(d.toArray(d.reduce(g,void 0,(function(r,e,n){return c.reduce(n,r,(function(r,n){var t=n[1];return d.update(r,n[0],(function(r){return s.some(d.update(f.getWithDefault(r,void 0),t,(function(r){return c.concat(f.getWithDefault(r,[]),[e])})))}))}))})))),(function(e){var t=e[0],a=u(d.toArray(e[1]));return f.forEach(d.get(r._tooltips,t),(function(r){return f.forEach(c.get(v.stableSortBy(c.map(a,(function(r){return[r[0],r[1].length]})),(function(r,e){return e[1]-r[1]|0})),0),(function(e){return y(r,"("+n(e[1],d.size(g))+") "+e[0])}))})),i.DOMRe.createDOMElementVariadic("div",void 0,[i.DOMRe.createDOMElementVariadic("p",void 0,[i.DOMRe.createDOMElementVariadic("strong",void 0,["#"+t])]),i.createElement(o.UList.make,{children:c.map(a,(function(r){return i.createElementVariadic(i.Fragment.make,{children:null},[i.DOMRe.createDOMElementVariadic("p",void 0,[r[0]]),i.createElement(o.UList.make,{children:c.map(m.stableSort(r[1]),(function(r){return i.DOMRe.createDOMElementVariadic("p",void 0,[r])}))})])}))})])}));break;case 2:e=c.map(u(d.toArray(_._0)),(function(r){var e=r[1];return i.DOMRe.createDOMElementVariadic("div",void 0,[i.DOMRe.createDOMElementVariadic("p",void 0,[i.DOMRe.createDOMElementVariadic("strong",void 0,[r[0]])]),f.mapWithDefault(e.content,null,(function(r){return i.DOMRe.createDOMElementVariadic("div",{className:h.answerDetailShortAnswer,dangerouslySetInnerHTML:{__html:r}},[])})),f.mapWithDefault(f.flatMap(e.attachments,(function(r){return r.filelist})),null,(function(r){return i.createElement(o.UList.make,{children:c.map(r,(function(r){return i.DOMRe.createDOMElementVariadic("a",{href:r.fileUrl},[r.fileName])}))})})),i.DOMRe.createDOMElementVariadic("div",void 0,[])])}))}r._detailsHtml=e},make:function(r,e,n){var t;switch(r.ty){case 0:t=[c.reduceWithIndex(o.querySelectorAllElements(e,".item-body .checkboxInput, .item-body .radioInput"),void 0,(function(r,e,n){return d.set(r,String.fromCharCode(n+65|0),{_ele:e})})),{TAG:0,_0:void 0}];break;case 1:t=[c.reduceWithIndex(o.querySelectorAllElements(e,".item-body .blank-item-dynamic"),void 0,(function(r,e,n){return d.set(r,String(n+1|0),{_ele:e})})),{TAG:1,_0:void 0}];break;case 2:t=[void 0,{TAG:2,_0:void 0}]}var i={_details:t[1],_detailsHtml:null,_tooltips:t[0],_choiceMap:n};return f.forEach(s.nullable_to_opt(e.querySelector(".item-type")),(function(r){r.classList.add(h.clickable);var e=r.getBoundingClientRect();r.addEventListener("click",(function(r){return b(i,0|e.top,0|e.left)}))})),i}}},(r,e,n)=>{n.r(e),n.d(e,{blit:()=>H,capitalize:()=>W,capitalize_ascii:()=>L,compare:()=>J,concat:()=>d,contains:()=>x,contains_from:()=>C,equal:()=>G,escaped:()=>y,index:()=>b,index_from:()=>R,index_from_opt:()=>O,index_opt:()=>S,init:()=>l,iter:()=>v,iteri:()=>_,lowercase:()=>B,lowercase_ascii:()=>U,make:()=>X,map:()=>m,mapi:()=>h,rcontains_from:()=>P,rindex:()=>k,rindex_from:()=>N,rindex_from_opt:()=>I,rindex_opt:()=>D,split_on_char:()=>j,sub:()=>f,trim:()=>g,uncapitalize:()=>F,uncapitalize_ascii:()=>q,uppercase:()=>V,uppercase_ascii:()=>T});var t=n(28),i=n(45),o=n(22),a=n(47),u=n(50),c=n(48);function l(r,e){return a.bytes_to_string(i.init(r,e))}function f(r,e,n){return a.bytes_to_string(i.sub(a.bytes_of_string(r),e,n))}function s(r,e){if(r>=e)return r;throw{RE_EXN_ID:"Invalid_argument",_1:"String.concat",Error:new Error}}function d(r,e){if(!e)return"";var n=r.length;return a.bytes_to_string(function(r,e,n,t,i){for(;;){var o=i,u=e;if(!o)return r;var c=o.tl,l=o.hd;if(!c)return a.caml_blit_string(l,0,r,u,l.length),r;a.caml_blit_string(l,0,r,u,l.length),a.caml_blit_string(n,0,r,u+l.length|0,t),i=c,e=(u+l.length|0)+t|0}}(a.caml_create_bytes(function(r,e,n){for(;;){var t=n,i=r;if(!t)return i;var o=t.tl,a=t.hd;if(!o)return a.length+i|0;n=o,r=s((a.length+e|0)+i|0,i)}}(0,n,e)),0,r,n,e))}function v(r,e){for(var n=0,t=e.length;n<t;++n)o._1(r,e.charCodeAt(n))}function _(r,e){for(var n=0,t=e.length;n<t;++n)o._2(r,n,e.charCodeAt(n))}function m(r,e){return a.bytes_to_string(i.map(r,a.bytes_of_string(e)))}function h(r,e){return a.bytes_to_string(i.mapi(r,a.bytes_of_string(e)))}function p(r){return r>13||r<9?32===r:11!==r}function g(r){return""===r||!p(r.charCodeAt(0))&&!p(r.charCodeAt(r.length-1|0))?r:a.bytes_to_string(i.trim(a.bytes_of_string(r)))}function y(r){return function(e){for(;;){var n=e;if(n>=r.length)return!1;var t=r.charCodeAt(n);if(t<32)return!0;if(t>92||t<34){if(t>=127)return!0;e=n+1|0}else{if(t>91||t<35)return!0;e=n+1|0}}}(0)?a.bytes_to_string(i.escaped(a.bytes_of_string(r))):r}function E(r,e,n,t){for(;;){var i=n;if(i>=e)throw{RE_EXN_ID:"Not_found",Error:new Error};if(r.charCodeAt(i)===t)return i;n=i+1|0}}function b(r,e){return E(r,r.length,0,e)}function w(r,e,n,t){for(;;){var i=n;if(i>=e)return;if(r.charCodeAt(i)===t)return i;n=i+1|0}}function S(r,e){return w(r,r.length,0,e)}function R(r,e,n){var t=r.length;if(e<0||e>t)throw{RE_EXN_ID:"Invalid_argument",_1:"String.index_from / Bytes.index_from",Error:new Error};return E(r,t,e,n)}function O(r,e,n){var t=r.length;if(e<0||e>t)throw{RE_EXN_ID:"Invalid_argument",_1:"String.index_from_opt / Bytes.index_from_opt",Error:new Error};return w(r,t,e,n)}function A(r,e,n){for(;;){var t=e;if(t<0)throw{RE_EXN_ID:"Not_found",Error:new Error};if(r.charCodeAt(t)===n)return t;e=t-1|0}}function k(r,e){return A(r,r.length-1|0,e)}function N(r,e,n){if(e<-1||e>=r.length)throw{RE_EXN_ID:"Invalid_argument",_1:"String.rindex_from / Bytes.rindex_from",Error:new Error};return A(r,e,n)}function M(r,e,n){for(;;){var t=e;if(t<0)return;if(r.charCodeAt(t)===n)return t;e=t-1|0}}function D(r,e){return M(r,r.length-1|0,e)}function I(r,e,n){if(e<-1||e>=r.length)throw{RE_EXN_ID:"Invalid_argument",_1:"String.rindex_from_opt / Bytes.rindex_from_opt",Error:new Error};return M(r,e,n)}function C(r,e,n){var t=r.length;if(e<0||e>t)throw{RE_EXN_ID:"Invalid_argument",_1:"String.contains_from / Bytes.contains_from",Error:new Error};try{return E(r,t,e,n),!0}catch(r){var i=c.internalToOCamlException(r);if("Not_found"===i.RE_EXN_ID)return!1;throw i}}function x(r,e){return C(r,0,e)}function P(r,e,n){if(e<0||e>=r.length)throw{RE_EXN_ID:"Invalid_argument",_1:"String.rcontains_from / Bytes.rcontains_from",Error:new Error};try{return A(r,e,n),!0}catch(r){var t=c.internalToOCamlException(r);if("Not_found"===t.RE_EXN_ID)return!1;throw t}}function T(r){return a.bytes_to_string(i.uppercase_ascii(a.bytes_of_string(r)))}function U(r){return a.bytes_to_string(i.lowercase_ascii(a.bytes_of_string(r)))}function L(r){return a.bytes_to_string(i.capitalize_ascii(a.bytes_of_string(r)))}function q(r){return a.bytes_to_string(i.uncapitalize_ascii(a.bytes_of_string(r)))}var J=t.caml_string_compare;function j(r,e){for(var n=0,t=e.length,i=e.length-1|0;i>=0;--i)e.charCodeAt(i)===r&&(n={hd:f(e,i+1|0,(t-i|0)-1|0),tl:n},t=i);return{hd:f(e,0,t),tl:n}}function V(r){return a.bytes_to_string(i.uppercase(a.bytes_of_string(r)))}function B(r){return a.bytes_to_string(i.lowercase(a.bytes_of_string(r)))}function W(r){return a.bytes_to_string(i.capitalize(a.bytes_of_string(r)))}function F(r){return a.bytes_to_string(i.uncapitalize(a.bytes_of_string(r)))}var X=u.make,H=i.blit_string;function G(r,e){return r===e}},(r,e,n)=>{n.r(e),n.d(e,{blit:()=>y,blit_string:()=>E,capitalize:()=>rr,capitalize_ascii:()=>P,cat:()=>O,compare:()=>Z,concat:()=>R,contains:()=>K,contains_from:()=>z,copy:()=>s,empty:()=>f,equal:()=>nr,escaped:()=>N,extend:()=>p,fill:()=>g,index:()=>L,index_from:()=>j,index_from_opt:()=>V,index_opt:()=>J,init:()=>l,iter:()=>b,iteri:()=>w,lowercase:()=>$,lowercase_ascii:()=>C,make:()=>c,map:()=>M,mapi:()=>D,of_string:()=>v,rcontains_from:()=>Y,rindex:()=>W,rindex_from:()=>F,rindex_from_opt:()=>G,rindex_opt:()=>H,sub:()=>_,sub_string:()=>m,to_string:()=>d,trim:()=>k,uncapitalize:()=>er,uncapitalize_ascii:()=>T,unsafe_of_string:()=>ir,unsafe_to_string:()=>tr,uppercase:()=>Q,uppercase_ascii:()=>I});var t=n(28),i=n(46),o=n(22),a=n(47),u=n(48);function c(r,e){var n=a.caml_create_bytes(r);return a.caml_fill_bytes(n,0,r,e),n}function l(r,e){for(var n=a.caml_create_bytes(r),t=0;t<r;++t)n[t]=o._1(e,t);return n}var f=[];function s(r){var e=r.length,n=a.caml_create_bytes(e);return a.caml_blit_bytes(r,0,n,0,e),n}function d(r){return a.bytes_to_string(s(r))}function v(r){return s(a.bytes_of_string(r))}function _(r,e,n){if(e<0||n<0||e>(r.length-n|0))throw{RE_EXN_ID:"Invalid_argument",_1:"String.sub / Bytes.sub",Error:new Error};var t=a.caml_create_bytes(n);return a.caml_blit_bytes(r,e,t,0,n),t}function m(r,e,n){return a.bytes_to_string(_(r,e,n))}function h(r,e){var n=r+e|0,t=e<0,i=n<0;if(r<0){if(!t)return n;if(i)return n;throw{RE_EXN_ID:"Invalid_argument",_1:"Bytes.extend",Error:new Error}}if(t)return n;if(i)throw{RE_EXN_ID:"Invalid_argument",_1:"Bytes.extend",Error:new Error};return n}function p(r,e,n){var i=h(h(r.length,e),n),o=a.caml_create_bytes(i),u=e<0?[0|-e,0]:[0,e],c=u[1],l=u[0],f=t.caml_int_min(r.length-l|0,i-c|0);return f>0&&a.caml_blit_bytes(r,l,o,c,f),o}function g(r,e,n,t){if(e<0||n<0||e>(r.length-n|0))throw{RE_EXN_ID:"Invalid_argument",_1:"String.fill / Bytes.fill",Error:new Error};return a.caml_fill_bytes(r,e,n,t)}function y(r,e,n,t,i){if(i<0||e<0||e>(r.length-i|0)||t<0||t>(n.length-i|0))throw{RE_EXN_ID:"Invalid_argument",_1:"Bytes.blit",Error:new Error};return a.caml_blit_bytes(r,e,n,t,i)}function E(r,e,n,t,i){if(i<0||e<0||e>(r.length-i|0)||t<0||t>(n.length-i|0))throw{RE_EXN_ID:"Invalid_argument",_1:"String.blit / Bytes.blit_string",Error:new Error};return a.caml_blit_string(r,e,n,t,i)}function b(r,e){for(var n=0,t=e.length;n<t;++n)o._1(r,e[n])}function w(r,e){for(var n=0,t=e.length;n<t;++n)o._2(r,n,e[n])}function S(r,e){if(r>=e)return r;throw{RE_EXN_ID:"Invalid_argument",_1:"Bytes.concat",Error:new Error}}function R(r,e){if(!e)return f;for(var n=r.length,t=a.caml_create_bytes(function(r,e,n){for(;;){var t=n,i=r;if(!t)return i;var o=t.tl,a=t.hd;if(!o)return a.length+i|0;n=o,r=S((a.length+e|0)+i|0,i)}}(0,n,e)),i=0,o=e;;){var u=o,c=i;if(!u)return t;var l=u.tl,s=u.hd;if(!l)return a.caml_blit_bytes(s,0,t,c,s.length),t;a.caml_blit_bytes(s,0,t,c,s.length),a.caml_blit_bytes(r,0,t,c+s.length|0,n),o=l,i=(c+s.length|0)+n|0}}function O(r,e){var n=r.length,t=e.length,i=a.caml_create_bytes(n+t|0);return a.caml_blit_bytes(r,0,i,0,n),a.caml_blit_bytes(e,0,i,n,t),i}function A(r){return r>13||r<9?32===r:11!==r}function k(r){for(var e=r.length,n=0;n<e&&A(r[n]);)n=n+1|0;for(var t=e-1|0;t>=n&&A(r[t]);)t=t-1|0;return t>=n?_(r,n,1+(t-n|0)|0):f}function N(r){for(var e=0,n=0,t=r.length;n<t;++n){var i=r[n];e=e+(i>=32?i>92||i<34?i>=127?4:1:i>91||i<35?2:1:i>=11?13!==i?4:2:i>=8?2:4)|0}if(e===r.length)return s(r);var o=a.caml_create_bytes(e);e=0;for(var u=0,c=r.length;u<c;++u){var l=r[u],f=0;if(l>=35)92!==l?l>=127?f=1:o[e]=l:f=2;else if(l>=32)l>=34?f=2:o[e]=l;else if(l>=14)f=1;else switch(l){case 8:o[e]=92,o[e=e+1|0]=98;break;case 9:o[e]=92,o[e=e+1|0]=116;break;case 10:o[e]=92,o[e=e+1|0]=110;break;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:f=1;break;case 13:o[e]=92,o[e=e+1|0]=114}switch(f){case 1:o[e]=92,o[e=e+1|0]=48+(l/100|0)|0,o[e=e+1|0]=48+(l/10|0)%10|0,o[e=e+1|0]=48+l%10|0;break;case 2:o[e]=92,o[e=e+1|0]=l}e=e+1|0}return o}function M(r,e){var n=e.length;if(0===n)return e;for(var t=a.caml_create_bytes(n),i=0;i<n;++i)t[i]=o._1(r,e[i]);return t}function D(r,e){var n=e.length;if(0===n)return e;for(var t=a.caml_create_bytes(n),i=0;i<n;++i)t[i]=o._2(r,i,e[i]);return t}function I(r){return M(i.uppercase_ascii,r)}function C(r){return M(i.lowercase_ascii,r)}function x(r,e){if(0===e.length)return e;var n=s(e);return n[0]=o._1(r,e[0]),n}function P(r){return x(i.uppercase_ascii,r)}function T(r){return x(i.lowercase_ascii,r)}function U(r,e,n,t){for(;;){var i=n;if(i>=e)throw{RE_EXN_ID:"Not_found",Error:new Error};if(r[i]===t)return i;n=i+1|0}}function L(r,e){return U(r,r.length,0,e)}function q(r,e,n,t){for(;;){var i=n;if(i>=e)return;if(r[i]===t)return i;n=i+1|0}}function J(r,e){return q(r,r.length,0,e)}function j(r,e,n){var t=r.length;if(e<0||e>t)throw{RE_EXN_ID:"Invalid_argument",_1:"String.index_from / Bytes.index_from",Error:new Error};return U(r,t,e,n)}function V(r,e,n){var t=r.length;if(e<0||e>t)throw{RE_EXN_ID:"Invalid_argument",_1:"String.index_from_opt / Bytes.index_from_opt",Error:new Error};return q(r,t,e,n)}function B(r,e,n){for(;;){var t=e;if(t<0)throw{RE_EXN_ID:"Not_found",Error:new Error};if(r[t]===n)return t;e=t-1|0}}function W(r,e){return B(r,r.length-1|0,e)}function F(r,e,n){if(e<-1||e>=r.length)throw{RE_EXN_ID:"Invalid_argument",_1:"String.rindex_from / Bytes.rindex_from",Error:new Error};return B(r,e,n)}function X(r,e,n){for(;;){var t=e;if(t<0)return;if(r[t]===n)return t;e=t-1|0}}function H(r,e){return X(r,r.length-1|0,e)}function G(r,e,n){if(e<-1||e>=r.length)throw{RE_EXN_ID:"Invalid_argument",_1:"String.rindex_from_opt / Bytes.rindex_from_opt",Error:new Error};return X(r,e,n)}function z(r,e,n){var t=r.length;if(e<0||e>t)throw{RE_EXN_ID:"Invalid_argument",_1:"String.contains_from / Bytes.contains_from",Error:new Error};try{return U(r,t,e,n),!0}catch(r){var i=u.internalToOCamlException(r);if("Not_found"===i.RE_EXN_ID)return!1;throw i}}function K(r,e){return z(r,0,e)}function Y(r,e,n){if(e<0||e>=r.length)throw{RE_EXN_ID:"Invalid_argument",_1:"String.rcontains_from / Bytes.rcontains_from",Error:new Error};try{return B(r,e,n),!0}catch(r){var t=u.internalToOCamlException(r);if("Not_found"===t.RE_EXN_ID)return!1;throw t}}var Z=a.caml_bytes_compare;function Q(r){return M(i.uppercase,r)}function $(r){return M(i.lowercase,r)}function rr(r){return x(i.uppercase,r)}function er(r){return x(i.lowercase,r)}var nr=a.caml_bytes_equal,tr=a.bytes_to_string,ir=a.bytes_of_string},(r,e,n)=>{n.r(e),n.d(e,{chr:()=>i,compare:()=>f,equal:()=>s,escaped:()=>o,lowercase:()=>a,lowercase_ascii:()=>c,uppercase:()=>u,uppercase_ascii:()=>l});var t=n(47);function i(r){if(r<0||r>255)throw{RE_EXN_ID:"Invalid_argument",_1:"Char.chr",Error:new Error};return r}function o(r){var e=0;if(r>=40){if(92===r)return"\\\\";e=r>=127?1:2}else if(r>=32){if(r>=39)return"\\'";e=2}else if(r>=14)e=1;else switch(r){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 11:case 12:e=1;break;case 13:return"\\r"}switch(e){case 1:var n=[0,0,0,0];return n[0]=92,n[1]=48+(r/100|0)|0,n[2]=48+(r/10|0)%10|0,n[3]=48+r%10|0,t.bytes_to_string(n);case 2:var i=[0];return i[0]=r,t.bytes_to_string(i)}}function a(r){return r>=65&&r<=90||r>=192&&r<=214||r>=216&&r<=222?r+32|0:r}function u(r){return r>=97&&r<=122||r>=224&&r<=246||r>=248&&r<=254?r-32|0:r}function c(r){return r>=65&&r<=90?r+32|0:r}function l(r){return r>=97&&r<=122?r-32|0:r}function f(r,e){return r-e|0}function s(r,e){return 0==(r-e|0)}},(r,e,n)=>{function t(r,e,n){if(e<0||e>=r.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};r[e]=n}function i(r,e){if(e<0||e>=r.length)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};return r[e]}function o(r,e,n,t){if(!(n<=0))for(var i=e,o=n+e|0;i<o;++i)r[i]=t}function a(r){if(r<0)throw{RE_EXN_ID:"Invalid_argument",_1:"String.create",Error:new Error};for(var e=new Array(r),n=0;n<r;++n)e[n]=0;return e}function u(r,e,n,t,i){if(!(i<=0))if(r!==n){var o=r.length-e|0;if(i<=o)for(var a=0;a<i;++a)n[t+a|0]=r[e+a|0];else{for(var u=0;u<o;++u)n[t+u|0]=r[e+u|0];for(var c=o;c<i;++c)n[t+c|0]=0}}else{if(e<t){for(var l=(r.length-t|0)-1|0,f=i-1|0,s=l>f?f:l;s>=0;--s)r[t+s|0]=r[e+s|0];return}if(e<=t)return;for(var d=(r.length-e|0)-1|0,v=i-1|0,_=d>v?v:d,m=0;m<=_;++m)r[t+m|0]=r[e+m|0]}}function c(r){var e=r.length,n="",t=e;if(e<=4096&&e===r.length)return String.fromCharCode.apply(null,r);for(var i=0;t>0;){for(var o=t<1024?t:1024,a=new Array(o),u=0;u<o;++u)a[u]=r[u+i|0];n+=String.fromCharCode.apply(null,a),t=t-o|0,i=i+o|0}return n}function l(r,e,n,t,i){if(!(i<=0)){var o=r.length-e|0;if(i<=o)for(var a=0;a<i;++a)n[t+a|0]=r.charCodeAt(e+a|0);else{for(var u=0;u<o;++u)n[t+u|0]=r.charCodeAt(e+u|0);for(var c=o;c<i;++c)n[t+c|0]=0}}}function f(r){for(var e=r.length,n=new Array(e),t=0;t<e;++t)n[t]=r.charCodeAt(t);return n}function s(r,e,n,t,i){for(;;){var o=n;if(o>=t)return i;var a=r[o],u=e[o];if(a>u)return 1;if(a<u)return-1;n=o+1|0}}function d(r,e){var n=r.length,t=e.length;return n===t?s(r,e,0,n,0):n<t?s(r,e,0,n,-1):s(r,e,0,t,1)}function v(r,e){var n=r.length;if(n!==e.length)return!1;for(var t=0;;){var i=t;if(i===n)return!0;if(r[i]!==e[i])return!1;t=i+1|0}}function _(r,e){return d(r,e)>0}function m(r,e){return d(r,e)>=0}function h(r,e){return d(r,e)<0}function p(r,e){return d(r,e)<=0}n.r(e),n.d(e,{bytes_of_string:()=>f,bytes_to_string:()=>c,caml_blit_bytes:()=>u,caml_blit_string:()=>l,caml_bytes_compare:()=>d,caml_bytes_equal:()=>v,caml_bytes_greaterequal:()=>m,caml_bytes_greaterthan:()=>_,caml_bytes_lessequal:()=>p,caml_bytes_lessthan:()=>h,caml_create_bytes:()=>a,caml_fill_bytes:()=>o,get:()=>i,set:()=>t})},(r,e,n)=>{n.r(e),n.d(e,{$$Error:()=>o,caml_as_js_exn:()=>u,internalToOCamlException:()=>a});var t=n(24),i=n(49),o=i.create("Caml_js_exceptions.Error");function a(r){return i.caml_is_extension(r)?r:{RE_EXN_ID:o,_1:r}}function u(r){if(r.RE_EXN_ID===o)return t.some(r._1)}},(r,e,n)=>{n.r(e),n.d(e,{caml_exn_slot_name:()=>a,caml_is_extension:()=>o,create:()=>i,id:()=>t});var t={contents:0};function i(r){return t.contents=t.contents+1|0,r+"/"+t.contents}function o(r){return null!=r&&"string"==typeof r.RE_EXN_ID}function a(r){return r.RE_EXN_ID}},(r,e,n)=>{function t(r,e){if(e>=r.length||e<0)throw{RE_EXN_ID:"Invalid_argument",_1:"index out of bounds",Error:new Error};return r.charCodeAt(e)}function i(r,e){return String.fromCharCode(e).repeat(r)}n.r(e),n.d(e,{get:()=>t,make:()=>i})},(r,e,n)=>{n.r(e),n.d(e,{entries:()=>a,fromArray:()=>l,fromList:()=>c,get:()=>i,map:()=>f,unsafeDeleteKey:()=>o,values:()=>u});var t=n(24);function i(r,e){if(e in r)return t.some(r[e])}var o=function(r,e){delete r[e]};function a(r){for(var e=Object.keys(r),n=e.length,t=new Array(n),i=0;i<n;++i){var o=e[i];t[i]=[o,r[o]]}return t}function u(r){for(var e=Object.keys(r),n=e.length,t=new Array(n),i=0;i<n;++i)t[i]=r[e[i]];return t}function c(r){for(var e={},n=r;;){var t=n;if(!t)return e;var i=t.hd;e[i[0]]=i[1],n=t.tl}}function l(r){for(var e={},n=r.length,t=0;t<n;++t){var i=r[t];e[i[0]]=i[1]}return e}function f(r,e){for(var n={},t=Object.keys(e),i=t.length,o=0;o<i;++o){var a=t[o];n[a]=r(e[a])}return n}},(r,e,n)=>{function t(r,e){if(0===e)throw{RE_EXN_ID:"Division_by_zero",Error:new Error};return r/e|0}function i(r,e){if(0===e)throw{RE_EXN_ID:"Division_by_zero",Error:new Error};return r%e}n.r(e),n.d(e,{div:()=>t,mod_:()=>i})},(r,e,n)=>{n.r(e),n.d(e,{checkInvariantInternal:()=>z,cmp:()=>p,cmpU:()=>h,empty:()=>{},eq:()=>y,eqU:()=>g,every:()=>k,everyU:()=>A,findFirstBy:()=>b,findFirstByU:()=>E,forEach:()=>S,forEachU:()=>w,fromArray:()=>x,get:()=>F,getExn:()=>G,getUndefined:()=>X,getWithDefault:()=>H,has:()=>m,isEmpty:()=>_,keep:()=>Q,keepU:()=>Z,keysToArray:()=>P,map:()=>tr,mapU:()=>nr,mapWithKey:()=>or,mapWithKeyU:()=>ir,maxKey:()=>q,maxKeyUndefined:()=>J,maxUndefined:()=>W,maximum:()=>B,merge:()=>Y,mergeMany:()=>v,mergeU:()=>K,minKey:()=>U,minKeyUndefined:()=>L,minUndefined:()=>V,minimum:()=>j,partition:()=>rr,partitionU:()=>$,reduce:()=>O,reduceU:()=>R,remove:()=>s,removeMany:()=>d,set:()=>u,size:()=>D,some:()=>M,someU:()=>N,split:()=>er,toArray:()=>C,toList:()=>I,update:()=>l,updateU:()=>c,valuesToArray:()=>T});var t=n(22),i=n(24),o=n(54),a=n(56);function u(r,e,n){if(void 0===r)return o.singleton(e,n);var t=r.k;if(e===t)return o.updateValue(r,n);var i=r.v;return e<t?o.bal(u(r.l,e,n),t,i,r.r):o.bal(r.l,t,i,u(r.r,e,n))}function c(r,e,n){if(void 0!==r){var t=r.k;if(e===t){var a=n(i.some(r.v));if(void 0!==a)return o.updateValue(r,i.valFromOption(a));var u=r.l,l=r.r;if(void 0===u)return l;if(void 0===l)return u;var f={contents:l.k},s={contents:l.v},d=o.removeMinAuxWithRef(l,f,s);return o.bal(u,f.contents,s.contents,d)}var v=r.v,_=r.l,m=r.r;if(e<t){var h=c(_,e,n);return _===h?r:o.bal(h,t,v,m)}var p=c(m,e,n);return m===p?r:o.bal(_,t,v,p)}var g=n(void 0);return void 0!==g?o.singleton(e,i.valFromOption(g)):r}function l(r,e,n){return c(r,e,t.__1(n))}function f(r,e){var n=r.k,t=r.l,i=r.r;if(e===n){if(void 0===t)return i;if(void 0===i)return t;var a={contents:i.k},u={contents:i.v},c=o.removeMinAuxWithRef(i,a,u);return o.bal(t,a.contents,u.contents,c)}if(e<n){if(void 0===t)return r;var l=f(t,e);return l===t?r:o.bal(l,n,r.v,i)}if(void 0===i)return r;var s=f(i,e);return o.bal(t,n,r.v,s)}function s(r,e){if(void 0!==r)return f(r,e)}function d(r,e){var n=e.length;if(void 0!==r)for(var t=r,i=0;;){var o=i;if(o>=n)return t;var a=f(t,e[o]);if(void 0===a)return a;i=o+1|0,t=a}}function v(r,e){for(var n=e.length,t=r,i=0;i<n;++i){var o=e[i];t=u(t,o[0],o[1])}return t}var _=o.isEmpty,m=a.has,h=a.cmpU,p=a.cmp,g=a.eqU,y=a.eq,E=o.findFirstByU,b=o.findFirstBy,w=o.forEachU,S=o.forEach,R=o.reduceU,O=o.reduce,A=o.everyU,k=o.every,N=o.someU,M=o.some,D=o.size,I=o.toList,C=o.toArray,x=a.fromArray,P=o.keysToArray,T=o.valuesToArray,U=o.minKey,L=o.minKeyUndefined,q=o.maxKey,J=o.maxKeyUndefined,j=o.minimum,V=o.minUndefined,B=o.maximum,W=o.maxUndefined,F=a.get,X=a.getUndefined,H=a.getWithDefault,G=a.getExn,z=o.checkInvariantInternal,K=a.mergeU,Y=a.merge,Z=o.keepSharedU,Q=o.keepShared,$=o.partitionSharedU,rr=o.partitionShared,er=a.split,nr=o.mapU,tr=o.map,ir=o.mapWithKeyU,or=o.mapWithKey},(r,e,n)=>{n.r(e),n.d(e,{bal:()=>d,balMutate:()=>Or,checkInvariantInternal:()=>tr,cmp:()=>_r,cmpU:()=>vr,concat:()=>X,concatOrJoin:()=>H,copy:()=>u,create:()=>c,eq:()=>hr,eqU:()=>mr,every:()=>J,everyU:()=>q,fillArray:()=>ar,findFirstBy:()=>M,findFirstByU:()=>N,forEach:()=>I,forEachU:()=>D,fromArray:()=>kr,fromSortedArrayAux:()=>sr,fromSortedArrayRevAux:()=>fr,fromSortedArrayUnsafe:()=>dr,get:()=>pr,getExn:()=>yr,getUndefined:()=>gr,getWithDefault:()=>Er,has:()=>br,isEmpty:()=>A,join:()=>F,keepMap:()=>Y,keepMapU:()=>K,keepShared:()=>z,keepSharedU:()=>G,keysToArray:()=>cr,lengthNode:()=>$,map:()=>x,mapU:()=>C,mapWithKey:()=>T,mapWithKeyU:()=>P,maxKey:()=>p,maxKeyUndefined:()=>g,maxUndefined:()=>R,maximum:()=>S,minKey:()=>_,minKeyUndefined:()=>m,minUndefined:()=>b,minimum:()=>E,partitionShared:()=>Q,partitionSharedU:()=>Z,reduce:()=>L,reduceU:()=>U,removeMinAuxWithRef:()=>O,removeMinAuxWithRootMutate:()=>Nr,singleton:()=>l,size:()=>rr,some:()=>V,someU:()=>j,stackAllLeft:()=>k,toArray:()=>ur,toList:()=>nr,updateMutate:()=>Ar,updateValue:()=>s,valuesToArray:()=>lr});var t=n(22),i=n(24),o=n(55);function a(r){return void 0!==r?r.h:0}function u(r){return void 0!==r?{k:r.k,v:r.v,h:r.h,l:u(r.l),r:u(r.r)}:r}function c(r,e,n,t){var i=a(r),o=a(t);return{k:e,v:n,h:i>=o?i+1|0:o+1|0,l:r,r:t}}function l(r,e){return{k:r,v:e,h:1,l:void 0,r:void 0}}function f(r,e){return void 0===e||void 0!==r&&r.h>=e.h}function s(r,e){return r.v===e?r:{k:r.k,v:e,h:r.h,l:r.l,r:r.r}}function d(r,e,n,t){var i=void 0!==r?r.h:0,o=void 0!==t?t.h:0;if(i>(o+2|0)){var u=r.l,l=r.r;return a(u)>=a(l)?c(u,r.k,r.v,c(l,e,n,t)):c(c(u,r.k,r.v,l.l),l.k,l.v,c(l.r,e,n,t))}if(o<=(i+2|0))return{k:e,v:n,h:i>=o?i+1|0:o+1|0,l:r,r:t};var f=t.l,s=t.r;return a(s)>=a(f)?c(c(r,e,n,f),t.k,t.v,s):c(c(r,e,n,f.l),f.k,f.v,c(f.r,t.k,t.v,s))}function v(r){for(;;){var e=r,n=e.l;if(void 0===n)return e.k;r=n}}function _(r){if(void 0!==r)return i.some(v(r))}function m(r){if(void 0!==r)return v(r)}function h(r){for(;;){var e=r,n=e.r;if(void 0===n)return e.k;r=n}}function p(r){if(void 0!==r)return i.some(h(r))}function g(r){if(void 0!==r)return h(r)}function y(r){for(;;){var e=r,n=e.l;if(void 0===n)return[e.k,e.v];r=n}}function E(r){if(void 0!==r)return y(r)}function b(r){if(void 0!==r)return y(r)}function w(r){for(;;){var e=r,n=e.r;if(void 0===n)return[e.k,e.v];r=n}}function S(r){if(void 0!==r)return w(r)}function R(r){if(void 0!==r)return w(r)}function O(r,e,n){var t=r.l;return void 0!==t?d(O(t,e,n),r.k,r.v,r.r):(e.contents=r.k,n.contents=r.v,r.r)}function A(r){return void 0===r}function k(r,e){for(;;){if(void 0===r)return e;e={hd:r,tl:e},r=r.l}}function N(r,e){if(void 0!==r){var n=N(r.l,e);if(void 0!==n)return n;var t=r.k,i=r.v;if(e(t,i))return[t,i];var o=N(r.r,e);return void 0!==o?o:void 0}}function M(r,e){return N(r,t.__2(e))}function D(r,e){for(;;){var n=r;if(void 0===n)return;D(n.l,e),e(n.k,n.v),r=n.r}}function I(r,e){return D(r,t.__2(e))}function C(r,e){if(void 0!==r){var n=C(r.l,e),t=e(r.v),i=C(r.r,e);return{k:r.k,v:t,h:r.h,l:n,r:i}}}function x(r,e){return C(r,t.__1(e))}function P(r,e){if(void 0!==r){var n=r.k,t=P(r.l,e),i=e(n,r.v),o=P(r.r,e);return{k:n,v:i,h:r.h,l:t,r:o}}}function T(r,e){return P(r,t.__2(e))}function U(r,e,n){for(;;){var t=e,i=r;if(void 0===i)return t;var o=i.k,a=i.v,u=i.l,c=i.r;e=n(U(u,t,n),o,a),r=c}}function L(r,e,n){return U(r,e,t.__3(n))}function q(r,e){for(;;){var n=r;if(void 0===n)return!0;if(!e(n.k,n.v))return!1;if(!q(n.l,e))return!1;r=n.r}}function J(r,e){return q(r,t.__2(e))}function j(r,e){for(;;){var n=r;if(void 0===n)return!1;if(e(n.k,n.v))return!0;if(j(n.l,e))return!0;r=n.r}}function V(r,e){return j(r,t.__2(e))}function B(r,e,n){return void 0!==r?d(B(r.l,e,n),r.k,r.v,r.r):l(e,n)}function W(r,e,n){return void 0!==r?d(r.l,r.k,r.v,W(r.r,e,n)):l(e,n)}function F(r,e,n,t){if(void 0===r)return B(t,e,n);if(void 0===t)return W(r,e,n);var i=r.k,o=r.v,a=r.h,u=r.l,l=r.r,f=t.k,s=t.v,v=t.h,_=t.l,m=t.r;return a>(v+2|0)?d(u,i,o,F(l,e,n,t)):v>(a+2|0)?d(F(r,e,n,_),f,s,m):c(r,e,n,t)}function X(r,e){if(void 0===r)return e;if(void 0===e)return r;var n={contents:e.k},t={contents:e.v},i=O(e,n,t);return F(r,n.contents,t.contents,i)}function H(r,e,n,t){return void 0!==n?F(r,e,i.valFromOption(n),t):X(r,t)}function G(r,e){if(void 0!==r){var n=r.k,t=r.v,i=G(r.l,e),o=e(n,t),a=G(r.r,e);return o?F(i,n,t,a):X(i,a)}}function z(r,e){return G(r,t.__2(e))}function K(r,e){if(void 0!==r){var n=r.k,t=r.v,o=K(r.l,e),a=e(n,t),u=K(r.r,e);return void 0!==a?F(o,n,i.valFromOption(a),u):X(o,u)}}function Y(r,e){return K(r,t.__2(e))}function Z(r,e){if(void 0===r)return[void 0,void 0];var n=r.k,t=r.v,i=Z(r.l,e),o=i[1],a=i[0],u=e(n,t),c=Z(r.r,e),l=c[1],f=c[0];return u?[F(a,n,t,f),X(o,l)]:[X(a,f),F(o,n,t,l)]}function Q(r,e){return Z(r,t.__2(e))}function $(r){var e=r.l,n=r.r;return(1+(void 0!==e?$(e):0)|0)+(void 0!==n?$(n):0)|0}function rr(r){return void 0!==r?$(r):0}function er(r,e){for(;;){var n=e,t=r;if(void 0===t)return n;var i=t.k,o=t.v,a=t.l;e={hd:[i,o],tl:er(t.r,n)},r=a}}function nr(r){return er(r,0)}function tr(r){for(;;){var e=r;if(void 0===e)return;var n=e.l,t=e.r,i=a(n)-a(t)|0;if(!(i<=2&&i>=-2))throw{RE_EXN_ID:"Assert_failure",_1:["belt_internalAVLtree.ml",373,4],Error:new Error};tr(n),r=t}}function ir(r,e,n){for(;;){var t=e,i=r,o=i.k,a=i.l,u=i.r,c=void 0!==a?ir(a,t,n):t;n[c]=o;var l=c+1|0;if(void 0===u)return l;e=l,r=u}}function or(r,e,n){for(;;){var t=e,i=r,o=i.l,a=i.r,u=void 0!==o?or(o,t,n):t;n[u]=i.v;var c=u+1|0;if(void 0===a)return c;e=c,r=a}}function ar(r,e,n){for(;;){var t=e,i=r,o=i.l,a=i.k,u=i.r,c=void 0!==o?ar(o,t,n):t;n[c]=[a,i.v];var l=c+1|0;if(void 0===u)return l;e=l,r=u}}function ur(r){if(void 0===r)return[];var e=$(r),n=new Array(e);return ar(r,0,n),n}function cr(r){if(void 0===r)return[];var e=$(r),n=new Array(e);return ir(r,0,n),n}function lr(r){if(void 0===r)return[];var e=$(r),n=new Array(e);return or(r,0,n),n}function fr(r,e,n){switch(n){case 0:return;case 1:var t=r[e];return l(t[0],t[1]);case 2:var i=r[e],o=r[e-1|0],a=i;return{k:o[0],v:o[1],h:2,l:l(a[0],a[1]),r:void 0};case 3:var u=r[e],f=r[e-1|0],s=r[e-2|0],d=f,v=u;return{k:d[0],v:d[1],h:2,l:l(v[0],v[1]),r:l(s[0],s[1])};default:var _=n/2|0,m=fr(r,e,_),h=r[e-_|0],p=fr(r,(e-_|0)-1|0,(n-_|0)-1|0);return c(m,h[0],h[1],p)}}function sr(r,e,n){switch(n){case 0:return;case 1:var t=r[e];return l(t[0],t[1]);case 2:var i=r[e],o=r[e+1|0],a=i;return{k:o[0],v:o[1],h:2,l:l(a[0],a[1]),r:void 0};case 3:var u=r[e],f=r[e+1|0],s=r[e+2|0],d=f,v=u;return{k:d[0],v:d[1],h:2,l:l(v[0],v[1]),r:l(s[0],s[1])};default:var _=n/2|0,m=sr(r,e,_),h=r[e+_|0],p=sr(r,1+(e+_|0)|0,(n-_|0)-1|0);return c(m,h[0],h[1],p)}}function dr(r){return sr(r,0,r.length)}function vr(r,e,n,t){var i=rr(r),o=rr(e);if(i!==o)return i<o?-1:1;for(var a=k(r,0),u=k(e,0);;){var c=u,l=a;if(!l)return 0;if(!c)return 0;var f=c.hd,s=l.hd,d=n(s.k,f.k);if(0!==d)return d;var v=t(s.v,f.v);if(0!==v)return v;u=k(f.r,c.tl),a=k(s.r,l.tl)}}function _r(r,e,n,i){return vr(r,e,n,t.__2(i))}function mr(r,e,n,t){if(rr(r)!==rr(e))return!1;for(var i=k(r,0),o=k(e,0);;){var a=o,u=i;if(!u)return!0;if(!a)return!0;var c=a.hd,l=u.hd;if(0!==n(l.k,c.k)||!t(l.v,c.v))return!1;o=k(c.r,a.tl),i=k(l.r,u.tl)}}function hr(r,e,n,i){return mr(r,e,n,t.__2(i))}function pr(r,e,n){for(;;){var t=r;if(void 0===t)return;var o=n(e,t.k);if(0===o)return i.some(t.v);r=o<0?t.l:t.r}}function gr(r,e,n){for(;;){var t=r;if(void 0===t)return;var i=n(e,t.k);if(0===i)return t.v;r=i<0?t.l:t.r}}function yr(r,e,n){for(;;){var t=r;if(void 0===t)throw{RE_EXN_ID:"Not_found",Error:new Error};var i=n(e,t.k);if(0===i)return t.v;r=i<0?t.l:t.r}}function Er(r,e,n,t){for(;;){var i=r;if(void 0===i)return n;var o=t(e,i.k);if(0===o)return i.v;r=o<0?i.l:i.r}}function br(r,e,n){for(;;){var t=r;if(void 0===t)return!1;var i=n(e,t.k);if(0===i)return!0;r=i<0?t.l:t.r}}function wr(r){var e=r.l;r.l=e.r,e.r=r;var n=a(r.l),t=a(r.r);r.h=(n>t?n:t)+1|0;var i=a(e.l),o=r.h;return e.h=(i>o?i:o)+1|0,e}function Sr(r){var e=r.r;r.r=e.l,e.l=r;var n=a(r.l),t=a(r.r);r.h=(n>t?n:t)+1|0;var i=a(e.r),o=r.h;return e.h=(i>o?i:o)+1|0,e}function Rr(r){var e=a(r.l),n=a(r.r);return r.h=(e>n?e:n)+1|0,r}function Or(r){var e,n,t=r.l,i=r.r,o=a(t),u=a(i);if(o>(2+u|0))return f(t.l,t.r)?Rr(wr(r)):Rr((n=Sr((e=r).l),e.l=n,wr(e)));if(u>(2+o|0)){var c=i.l;return f(i.r,c)?Rr(Sr(r)):Rr(function(r){var e=wr(r.r);return r.r=e,Sr(r)}(r))}return r.h=(o>u?o:u)+1|0,r}function Ar(r,e,n,t){if(void 0===r)return l(e,n);var i=t(e,r.k);if(0===i)return r.v=n,r;var o=r.l,a=r.r;if(i<0){var u=Ar(o,e,n,t);r.l=u}else r.r=Ar(a,e,n,t);return Or(r)}function kr(r,e){var n=r.length;if(0!==n){var t,i=o.strictlySortedLengthU(r,(function(r,n){return e(r[0],n[0])<0}));t=i>=0?sr(r,0,i):fr(r,(i=0|-i)-1|0,i);for(var a=i;a<n;++a){var u=r[a];t=Ar(t,u[0],u[1],e)}return t}}function Nr(r,e){var n=e.r,t=e.l;return void 0!==t?(e.l=Nr(r,t),Or(e)):(r.k=e.k,r.v=e.v,n)}},(r,e,n)=>{n.r(e),n.d(e,{$$String:()=>{},Int:()=>{},binarySearchBy:()=>S,binarySearchByU:()=>w,diff:()=>m,diffU:()=>_,intersect:()=>v,intersectU:()=>d,isSorted:()=>c,isSortedU:()=>u,stableSortBy:()=>b,stableSortByU:()=>E,stableSortInPlaceBy:()=>y,stableSortInPlaceByU:()=>g,strictlySortedLength:()=>a,strictlySortedLengthU:()=>o,union:()=>s,unionU:()=>f});var t=n(22),i=n(27);function o(r,e){var n=r.length;if(0===n||1===n)return n;var t=r[0],i=r[1];if(!e(t,i))return e(i,t)?0|-function(r,e,n,t,i){for(;;){var o=n,a=e;if(o>=t)return o;var u=r[o];if(!i(u,a))return o;n=o+1|0,e=u}}(r,i,2,n,e):1;for(var o=i,a=2;;){var u=a,c=o;if(u>=n)return u;var l=r[u];if(!e(c,l))return u;a=u+1|0,o=l}}function a(r,e){return o(r,t.__2(e))}function u(r,e){var n=r.length;if(0===n)return!0;for(var t=0,i=n-1|0;;){var o=t;if(o===i)return!0;if(e(r[o],r[o+1|0])>0)return!1;t=o+1|0}}function c(r,e){return u(r,t.__2(e))}function l(r,e,n,t,o,a,u,c,l){for(var f=e+n|0,s=o+a|0,d=e,v=r[e],_=o,m=t[o],h=c;;){var p=h,g=m,y=_,E=v,b=d;if(l(E,g)<=0){u[p]=E;var w=b+1|0;if(w>=f)return i.blitUnsafe(t,y,u,p+1|0,s-y|0);h=p+1|0,v=r[w],d=w}else{u[p]=g;var S=y+1|0;if(S>=s)return i.blitUnsafe(r,b,u,p+1|0,f-b|0);h=p+1|0,m=t[S],_=S}}}function f(r,e,n,t,o,a,u,c,l){for(var f=e+n|0,s=o+a|0,d=e,v=r[e],_=o,m=t[o],h=c;;){var p=h,g=m,y=_,E=v,b=d,w=l(E,g);if(w<0){u[p]=E;var S=b+1|0,R=p+1|0;if(S<f){h=R,v=r[S],d=S;continue}return i.blitUnsafe(t,y,u,R,s-y|0),(R+s|0)-y|0}if(0!==w){u[p]=g;var O=y+1|0,A=p+1|0;if(!(O<s))return i.blitUnsafe(r,b,u,A,f-b|0),(A+f|0)-b|0;h=A,m=t[O],_=O}else{u[p]=E;var k=b+1|0,N=y+1|0,M=p+1|0;if(!(k<f&&N<s))return k===f?(i.blitUnsafe(t,N,u,M,s-N|0),(M+s|0)-N|0):(i.blitUnsafe(r,k,u,M,f-k|0),(M+f|0)-k|0);h=M,m=t[N],_=N,v=r[k],d=k}}}function s(r,e,n,i,o,a,u,c,l){return f(r,e,n,i,o,a,u,c,t.__2(l))}function d(r,e,n,t,i,o,a,u,c){for(var l=e+n|0,f=i+o|0,s=e,d=r[e],v=i,_=t[i],m=u;;){var h=m,p=v,g=d,y=s,E=c(g,_);if(E<0){var b=y+1|0;if(b>=l)return h;d=r[b],s=b}else if(0!==E){var w=p+1|0;if(w>=f)return h;_=t[w],v=w}else{a[h]=g;var S=y+1|0,R=p+1|0,O=h+1|0;if(!(S<l&&R<f))return O;m=O,_=t[R],v=R,d=r[S],s=S}}}function v(r,e,n,i,o,a,u,c,l){return d(r,e,n,i,o,a,u,c,t.__2(l))}function _(r,e,n,t,o,a,u,c,l){for(var f=e+n|0,s=o+a|0,d=e,v=r[e],_=o,m=t[o],h=c;;){var p=h,g=_,y=v,E=d,b=l(y,m);if(b<0){u[p]=y;var w=p+1|0,S=E+1|0;if(S>=f)return w;h=w,v=r[S],d=S}else if(0!==b){var R=g+1|0;if(!(R<s))return i.blitUnsafe(r,E,u,p,f-E|0),(p+f|0)-E|0;m=t[R],_=R}else{var O=E+1|0,A=g+1|0;if(!(O<f&&A<s))return O===f?p:(i.blitUnsafe(r,O,u,p,f-O|0),(p+f|0)-O|0);m=t[A],_=A,v=r[O],d=O}}}function m(r,e,n,i,o,a,u,c,l){return _(r,e,n,i,o,a,u,c,t.__2(l))}function h(r,e,n,t,i,o){for(var a=0;a<i;++a){for(var u=r[e+a|0],c=(t+a|0)-1|0;c>=t&&o(n[c],u)>0;)n[c+1|0]=n[c],c=c-1|0;n[c+1|0]=u}}function p(r,e,n,t,i,o){if(i<=5)return h(r,e,n,t,i,o);var a=i/2|0,u=i-a|0;return p(r,e+a|0,n,t+a|0,u,o),p(r,e,r,e+u|0,a,o),l(r,e+u|0,a,n,t+a|0,u,n,t,o)}function g(r,e){var n=r.length;if(n<=5)return h(r,0,r,0,n,e);var t=n/2|0,i=n-t|0,o=new Array(i);return p(r,t,o,0,i,e),p(r,0,r,i,t,e),l(r,i,t,o,0,i,r,0,e)}function y(r,e){return g(r,t.__2(e))}function E(r,e){var n=r.slice(0);return g(n,e),n}function b(r,e){return E(r,t.__2(e))}function w(r,e,n){var t=r.length;if(0===t)return-1;if(n(e,r[0])<0)return-1;if(n(e,r[t-1|0])>0)return 0|-(t+1|0);for(var i=0,o=t-1|0;;){var a=o,u=i,c=(u+a|0)/2|0,l=n(e,r[c]);if(0===l)return c;if(l<0){if(a===c)return 0===n(r[u],e)?u:0|-(a+1|0);o=c}else{if(u===c)return 0===n(r[a],e)?a:0|-(a+1|0);i=c}}}function S(r,e,n){return w(r,e,t.__2(n))}},(r,e,n)=>{n.r(e),n.d(e,{A:()=>{},N:()=>{},S:()=>{},add:()=>c,addMutate:()=>O,cmp:()=>b,cmpU:()=>E,compareAux:()=>y,eq:()=>R,eqAux:()=>w,eqU:()=>S,fromArray:()=>A,get:()=>l,getExn:()=>s,getUndefined:()=>f,getWithDefault:()=>d,has:()=>v,merge:()=>g,mergeU:()=>p,remove:()=>_,split:()=>h,splitAux:()=>m});var t=n(28),i=n(22),o=n(24),a=n(55),u=n(54);function c(r,e,n){if(void 0===r)return u.singleton(e,n);var t=r.k;if(e===t)return u.updateValue(r,n);var i=r.v;return e<t?u.bal(c(r.l,e,n),t,i,r.r):u.bal(r.l,t,i,c(r.r,e,n))}function l(r,e){for(;;){var n=r;if(void 0===n)return;var t=n.k;if(e===t)return o.some(n.v);r=e<t?n.l:n.r}}function f(r,e){for(;;){var n=r;if(void 0===n)return;var t=n.k;if(e===t)return n.v;r=e<t?n.l:n.r}}function s(r,e){for(;;){var n=r;if(void 0===n)throw{RE_EXN_ID:"Not_found",Error:new Error};var t=n.k;if(e===t)return n.v;r=e<t?n.l:n.r}}function d(r,e,n){for(;;){var t=r;if(void 0===t)return n;var i=t.k;if(e===i)return t.v;r=e<i?t.l:t.r}}function v(r,e){for(;;){var n=r;if(void 0===n)return!1;var t=n.k;if(e===t)return!0;r=e<t?n.l:n.r}}function _(r,e){if(void 0===r)return r;var n=r.k,t=r.l,i=r.r;if(e!==n)return e<n?u.bal(_(t,e),n,r.v,i):u.bal(t,n,r.v,_(i,e));if(void 0===t)return i;if(void 0===i)return t;var o={contents:i.k},a={contents:i.v},c=u.removeMinAuxWithRef(i,o,a);return u.bal(t,o.contents,a.contents,c)}function m(r,e){var n=e.k,t=e.v,i=e.l,a=e.r;if(r===n)return[i,o.some(t),a];if(r<n){if(void 0===i)return[void 0,void 0,e];var c=m(r,i);return[c[0],c[1],u.join(c[2],n,t,a)]}if(void 0===a)return[e,void 0,void 0];var l=m(r,a);return[u.join(i,n,t,l[0]),l[1],l[2]]}function h(r,e){return void 0!==e?m(r,e):[void 0,void 0,void 0]}function p(r,e,n){if(void 0!==r){if(r.h>=(void 0!==e?e.h:0)){var t=r.k,i=r.v,a=r.l,c=r.r,l=h(t,e);return u.concatOrJoin(p(a,l[0],n),t,n(t,o.some(i),l[1]),p(c,l[2],n))}}else if(void 0===e)return;var f=e.k,s=e.v,d=e.l,v=e.r,_=h(f,r);return u.concatOrJoin(p(_[0],d,n),f,n(f,_[1],o.some(s)),p(_[2],v,n))}function g(r,e,n){return p(r,e,i.__3(n))}function y(r,e,n){for(;;){var i=e,o=r;if(!o)return 0;if(!i)return 0;var a=i.hd,c=o.hd,l=t.caml_string_compare(c.k,a.k);if(0!==l)return l;var f=n(c.v,a.v);if(0!==f)return f;e=u.stackAllLeft(a.r,i.tl),r=u.stackAllLeft(c.r,o.tl)}}function E(r,e,n){var t=u.size(r),i=u.size(e);return t===i?y(u.stackAllLeft(r,0),u.stackAllLeft(e,0),n):t<i?-1:1}function b(r,e,n){return E(r,e,i.__2(n))}function w(r,e,n){for(;;){var t=e,i=r;if(!i)return!0;if(!t)return!0;var o=t.hd,a=i.hd;if(a.k!==o.k||!n(a.v,o.v))return!1;e=u.stackAllLeft(o.r,t.tl),r=u.stackAllLeft(a.r,i.tl)}}function S(r,e,n){return u.size(r)===u.size(e)&&w(u.stackAllLeft(r,0),u.stackAllLeft(e,0),n)}function R(r,e,n){return S(r,e,i.__2(n))}function O(r,e,n){if(void 0===r)return u.singleton(e,n);var t=r.k;if(e===t)return r.k=e,r.v=n,r;var i=r.l,o=r.r;if(e<t){var a=O(i,e,n);r.l=a}else r.r=O(o,e,n);return u.balMutate(r)}function A(r){var e=r.length;if(0!==e){var n,t=a.strictlySortedLengthU(r,(function(r,e){return r[0]<e[0]}));t>=0?n=u.fromSortedArrayAux(r,0,t):(t=0|-t,n=u.fromSortedArrayRevAux(r,t-1|0,t));for(var i=t;i<e;++i){var o=r[i];n=O(n,o[0],o[1])}return n}}},,,,(r,e,n)=>{n.r(e),n.d(e,{binarySearch:()=>_,diff:()=>l,intersect:()=>c,isSorted:()=>o,stableSort:()=>v,stableSortInPlace:()=>d,strictlySortedLength:()=>i,union:()=>u});var t=n(27);function i(r){var e=r.length;if(0===e||1===e)return e;var n=r[0],t=r[1];if(!(n<t))return n>t?0|-function(r,e,n,t){for(;;){var i=n,o=e;if(i>=t)return i;var a=r[i];if(o<=a)return i;n=i+1|0,e=a}}(r,t,2,e):1;for(var i=t,o=2;;){var a=o,u=i;if(a>=e)return a;var c=r[a];if(u>=c)return a;o=a+1|0,i=c}}function o(r){var e=r.length;if(0===e)return!0;for(var n=0,t=e-1|0;;){var i=n;if(i===t)return!0;if(r[i]>r[i+1|0])return!1;n=i+1|0}}function a(r,e,n,i,o,a,u,c){for(var l=e+n|0,f=o+a|0,s=e,d=r[e],v=o,_=i[o],m=c;;){var h=m,p=_,g=v,y=d,E=s;if(y<=p){u[h]=y;var b=E+1|0;if(b>=l)return t.blitUnsafe(i,g,u,h+1|0,f-g|0);m=h+1|0,d=r[b],s=b}else{u[h]=p;var w=g+1|0;if(w>=f)return t.blitUnsafe(r,E,u,h+1|0,l-E|0);m=h+1|0,_=i[w],v=w}}}function u(r,e,n,i,o,a,u,c){for(var l=e+n|0,f=o+a|0,s=e,d=r[e],v=o,_=i[o],m=c;;){var h=m,p=_,g=v,y=d,E=s;if(y<p){u[h]=y;var b=E+1|0,w=h+1|0;if(b<l){m=w,d=r[b],s=b;continue}return t.blitUnsafe(i,g,u,w,f-g|0),(w+f|0)-g|0}if(y!==p){u[h]=p;var S=g+1|0,R=h+1|0;if(!(S<f))return t.blitUnsafe(r,E,u,R,l-E|0),(R+l|0)-E|0;m=R,_=i[S],v=S}else{u[h]=y;var O=E+1|0,A=g+1|0,k=h+1|0;if(!(O<l&&A<f))return O===l?(t.blitUnsafe(i,A,u,k,f-A|0),(k+f|0)-A|0):(t.blitUnsafe(r,O,u,k,l-O|0),(k+l|0)-O|0);m=k,_=i[A],v=A,d=r[O],s=O}}}function c(r,e,n,t,i,o,a,u){for(var c=e+n|0,l=i+o|0,f=e,s=r[e],d=i,v=t[i],_=u;;){var m=_,h=v,p=d,g=s,y=f;if(g<h){var E=y+1|0;if(E>=c)return m;s=r[E],f=E}else if(g!==h){var b=p+1|0;if(b>=l)return m;v=t[b],d=b}else{a[m]=g;var w=y+1|0,S=p+1|0,R=m+1|0;if(!(w<c&&S<l))return R;_=R,v=t[S],d=S,s=r[w],f=w}}}function l(r,e,n,i,o,a,u,c){for(var l=e+n|0,f=o+a|0,s=e,d=r[e],v=o,_=i[o],m=c;;){var h=m,p=_,g=v,y=d,E=s;if(y<p){u[h]=y;var b=h+1|0,w=E+1|0;if(w>=l)return b;m=b,d=r[w],s=w}else if(y!==p){var S=g+1|0;if(!(S<f))return t.blitUnsafe(r,E,u,h,l-E|0),(h+l|0)-E|0;_=i[S],v=S}else{var R=E+1|0,O=g+1|0;if(!(R<l&&O<f))return R===l?h:(t.blitUnsafe(r,R,u,h,l-R|0),(h+l|0)-R|0);_=i[O],v=O,d=r[R],s=R}}}function f(r,e,n,t,i){for(var o=0;o<i;++o){for(var a=r[e+o|0],u=(t+o|0)-1|0;u>=t&&n[u]>a;)n[u+1|0]=n[u],u=u-1|0;n[u+1|0]=a}}function s(r,e,n,t,i){if(i<=5)return f(r,e,n,t,i);var o=i/2|0,u=i-o|0;return s(r,e+o|0,n,t+o|0,u),s(r,e,r,e+u|0,o),a(r,e+u|0,o,n,t+o|0,u,n,t)}function d(r){var e=r.length;if(e<=5)return f(r,0,r,0,e);var n=e/2|0,t=e-n|0,i=new Array(t);return s(r,n,i,0,t),s(r,0,r,t,n),a(r,t,n,i,0,t,r,0)}function v(r){var e=r.slice(0);return d(e),e}function _(r,e){var n=r.length;if(0===n)return-1;if(e<r[0])return-1;if(e>r[n-1|0])return 0|-(n+1|0);for(var t=0,i=n-1|0;;){var o=i,a=t,u=(a+o|0)/2|0,c=r[u];if(e===c)return u;if(e<c){if(o===u)return r[a]===e?a:0|-(o+1|0);i=u}else{if(a===u)return r[o]===e?o:0|-(o+1|0);t=u}}}}],e={};function n(t){var i=e[t];if(void 0!==i)return i.exports;var o=e[t]={id:t,exports:{}};return r[t].call(o.exports,o,o.exports,n),o.exports}n.n=r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return n.d(e,{a:e}),e},n.d=(r,e)=>{for(var t in e)n.o(e,t)&&!n.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},n.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),n.r=r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var t={};(()=>{n.r(t);var r=n(1),e=n(15),i=n(16),o=n(17),a=n(9),u=n(14),c=function(r,e,n,t){return new(n||(n=Promise))((function(i,o){function a(r){try{c(t.next(r))}catch(r){o(r)}}function u(r){try{c(t.throw(r))}catch(r){o(r)}}function c(r){var e;r.done?i(r.value):(e=r.value,e instanceof n?e:new n((function(r){r(e)}))).then(a,u)}c((t=t.apply(r,e||[])).next())}))};function l(r){return!0===u.SORT_PROBLEMS.value&&r.sort(((r,e)=>r.problem_id-e.problem_id)),r.forEach((r=>{if((0,i.isChoice)(r.ProblemType)){const e=r.Options;!0===u.SORT_PROBLEMS.value&&e.sort(((r,e)=>r.key<e.key?-1:1)),e.forEach(((e,n)=>{o.CHOICE_MAP.setWith(r.problem_id,(r=>r.set(e.key,String.fromCharCode(65+n))))}))}})),r}(function(){return c(this,void 0,void 0,(function*(){!0===u.NO_LEAVE_CHECK.value&&(document.addEventListener("visibilitychange",(r=>{r.preventDefault(),r.stopImmediatePropagation()}),!0),window.addEventListener("visibilitychange",(r=>{r.preventDefault(),r.stopImmediatePropagation()}),!0));const n=new r.Client;(0,e.hookXHR)((function(r){switch(r.pathname){case"/exam_room/show_paper":this.addEventListener("readystatechange",(()=>{if(this.readyState==XMLHttpRequest.DONE){const e=JSON.stringify((!0===(r=JSON.parse(this.responseText)).data.has_problem_dict?r.data.problems=r.data.problems.sort(((r,e)=>r.id-e.id)).map((r=>(r.problems=l(r.problems),r))):r.data.problems=l(r.data.problems),(0,a.devLog)(o.CHOICE_MAP),r));Object.defineProperties(this,{responseText:{get:()=>e}})}var r})),this.addEventListener("load",(()=>{const e=JSON.parse(this.responseText);(0,a.devLog)("intercept paper",e);const t=new o.UI(e);n.onmessage((r=>{r.forEach((r=>t.updateAnswer(r))),t.updateUI()})),(()=>c(this,void 0,void 0,(function*(){u.EXAM_ID.value=parseInt(r.searchParams.get("exam_id"));const e=yield fetch((0,a.newURL)("/exam_room/cache_results",{exam_id:u.EXAM_ID.value.toString()}).toString()).then((r=>r.json()));n.answerProblem(e.data.results)})))().catch(a.devLog)}));break;case"/exam_room/answer_problem":return r=>c(this,void 0,void 0,(function*(){var e;if("string"==typeof r){const t=JSON.parse(r);if("action"in t)switch(t.action){case 1:case 17:break;default:return console.log("intercept action",t),new Promise((()=>{}))}else"results"in t&&((0,a.devLog)("intercept answers",t),n.answerProblem(null!==(e=t.results)&&void 0!==e?e:[]).catch(a.devLog))}return r}));default:if("upload-z1.qiniup.com"===r.hostname)return r=>c(this,void 0,void 0,(function*(){return r instanceof FormData&&r.get("file")instanceof File?new Promise((e=>{const n=new FileReader;n.onload=()=>(0,o.showConfirmUpload)(n.result,(()=>e(r))),n.readAsDataURL(r.get("file"))})):r}))}})),yield n.watch(1e4)}))})().catch(console.error)})()})();